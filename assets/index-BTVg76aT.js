import{aS as _,q as I,ax as z,aX as D,aK as d,s as R,bH as u,I as r,v as g,bJ as E,bz as H,b9 as y,u as h,at as x,H as O,F as w,aV as J,t as $,r as j}from"./@vue-Dkad1Scs.js";import{V as F,a as L,b as N,c as S,d as K,e as W,f as G,g as X,h as Y,i as Q,j as Z}from"./vuetify-Bz6dI_0v.js";/* empty css             */import{V as ee}from"./vue3-beautiful-chat-DLJUIo1Z.js";import"./vue-BghDAyl9.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const v of n.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&l(v)}).observe(document,{childList:!0,subtree:!0});function c(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(o){if(o.ep)return;o.ep=!0;const n=c(o);fetch(o.href,n)}})();async function k({url:i,method:s,data:c}){console.log(i);const l="https://www.teenteen123.com",o=101,n=new AbortController;setTimeout(()=>n.abort(),3e4);const v={appId:o,languageType:"EN",sign:"9310a4024d28e726",uid:"e15f5aadb3c3470ebda51c53486f40e1"};let C;return await fetch(`${l}${i}`,{method:s,body:JSON.stringify({...v,...c}),headers:{"Content-Type":"application/json"},signal:n.signal}).then(p=>p.json()).catch(p=>console.error("Error:",p)).then(p=>{p.state=="200"?C=p.resultData:console.error("Error:",p.msg)}),C}function te(i){return k({url:"/customer/index",method:"POST",data:i})}function ae(i){return k({url:"/customer/get",method:"POST",data:i})}function oe(i){return k({url:"/customer/success",method:"POST",data:i})}function se(i){return k({url:"/customer/fail",method:"POST",data:i})}const le={class:"customer-info"},ne=["innerHTML"],re="https://storage.googleapis.com/baowang-admin",ie={__name:"App",setup(i){const s=_([]),c=_([]),l=_(!0),o=_(!1),n=_(!1),v={header:{bg:"#ffffff",text:"#4e8cff"},launcher:{bg:"#4e8cff"},messageList:{bg:"#eaeaea"},sentMessage:{bg:"#4e8cff",text:"#ffffff"},receivedMessage:{bg:"#ffffff",text:"#222222"},userInput:{bg:"#f4f7f9",text:"#565867"}},C=I(()=>c.value.filter(t=>!t.isRead.length).length),p=I(()=>o.value?String(s.value[0].id):""),V=(t=!1)=>{t&&(c.value=[]),te().then(e=>{s.value=[e.customerAccount].map(b=>(b.imageUrl=re+b.imageUrl,b)),console.log(JSON.parse(e.data)),c.value.push({id:0,author:s.value[0].id,type:"text",isRead:l.value,data:{type:e.type,text:e.reply||"Hello Sir is there any thing I can help you with?",list:JSON.parse(e.data)}})}).catch(e=>console.log(e))};z(()=>V(!0));const M=t=>new Promise(e=>setTimeout(e,t)),P=async t=>{t.display&&t.display.length>0&&f({author:"me",type:"text",isRead:l.value,data:{text:t.display}}),o.value=!0,t.type==-1?f({author:s.value[0].id,type:"text",isRead:l.value,data:{type:t.type,text:"Please click the button below to contact Senior Customer Service",btnText:"Senior Customer Service",link:t.link}}):t.type==0?V():t.type==1?f({author:s.value[0].id,type:"text",isRead:l.value,data:{type:t.type,text:t.text}}):ae({questionId:t.id}).then(e=>{console.log(e),!e||!e.data&&!e.reply?f({author:s.value[0].id,type:"text",isRead:l.value,data:{type:0,text:"No record Data"}}):(console.log(JSON.parse(e.data||"[]")),f({author:s.value[0].id,type:"text",isRead:l.value,data:{type:e.type,text:e.reply||"",list:JSON.parse(e.data||"[]")}}))}).catch(e=>console.log(e)),p.value=""},f=async t=>{t.id==s.value[0].id&&await M(Math.random()*2*100),o.value=!1,c.value.push(t)},B=t=>{f({author:"me",type:"text",isRead:l.value,data:{text:"Solve issue"}}),o.value=!0,oe({questionId:t.id}).then(e=>{console.log(e),f({author:s.value[0].id,type:"text",isRead:l.value,data:{text:t.list.solve_reply}})})},A=t=>{f({author:"me",type:"text",isRead:l.value,data:{text:"Unsolve issue"}}),o.value=!0,se({questionId:t.id}).then(e=>{console.log(e),f({author:s.value[0].id,type:"text",isRead:l.value,data:{type:2,text:t.list.unsolve_reply,list:[{type:0,display:t.list.unsolve_select_text},{type:-1,display:t.list.unsolve_customer_text,link:t.list.customer_link}]}})})},U=()=>{l.value=!0,c.value.forEach((t,e)=>{t.isRead=!0,e==c.value.length-1&&t.id!=0&&V()})},T=()=>{l.value=!1};return(t,e)=>{const b=D("beautiful-chat");return d(),R(Q,null,{default:u(()=>[r(Y,null,{default:u(()=>[r(b,{participants:s.value,onMessageWasSent:f,messageList:c.value,newMessagesCount:C.value||0,isOpen:l.value,open:U,close:T,showHeader:!0,showLauncher:!0,showTypingIndicator:p.value,showCloseButton:!1,colors:v,alwaysScrollToBottom:!0,disableUserListToggle:!0},{header:u(()=>{var a;return[e[1]||(e[1]=g("div",{class:"header-text"},"Customer Service Center",-1)),g("div",le,[r(F,{size:"large",color:"surface-light"},{default:u(()=>{var m;return[r(L,{src:(m=s.value[0])==null?void 0:m.imageUrl},{error:u(()=>[r(N,{icon:"mdi-face-agent",size:"large",style:{height:"100%"}})]),_:1},8,["src"])]}),_:1}),E(g("span",null,y((a=s.value[0])==null?void 0:a.name)+" is serving",513),[[H,s.value[0]]])]),r(S,{class:"btn-close",icon:"$close",size:"large",variant:"text",onClick:T})]}),"text-message-body":u(({message:a})=>[a.data.type==-1?(d(),h(w,{key:0},[g("div",{class:x(["msg_text",{unread:!a.isRead}])},y(a.data.text),3),r(S,{class:"btn-cs","prepend-icon":"mdi-information",color:"primary",density:"compact",flat:"",block:"",href:a.data.link,target:"_blank"},{default:u(()=>[O(y(a.data.btnText),1)]),_:2},1032,["href"])],64)):a.data.type==1?(d(),h("div",{key:1,class:x({unread:!a.isRead}),innerHTML:a.data.text},null,10,ne)):a.data.type==2?(d(),h(w,{key:2},[g("div",{class:x(["msg_text",{unread:!a.isRead}])},y(a.data.text),3),r(K,{density:"compact",lines:"one"},{default:u(()=>[(d(!0),h(w,null,J(a.data.list,(m,q)=>(d(),R(W,{key:q,title:m.display,"min-height":"1rem",onClick:de=>P(m)},null,8,["title","onClick"]))),128))]),_:2},1024)],64)):a.data.type==3?(d(),h("div",{key:3,class:x(["msg_text",{unread:!a.isRead}])},y(a.data.text||"充值列表"),3)):a.data.type==4?(d(),h("div",{key:4,class:x(["msg_text",{unread:!a.isRead}])},y(a.data.text||"提現列表"),3)):a.data.type==5?(d(),h(w,{key:5},[g("div",{class:x(["msg_text",{unread:!a.isRead}])},y(a.data.text),3),r(G,{density:"compact",flat:""},{default:u(()=>[r(S,{class:"btn-solve",color:"primary","prepend-icon":"mdi-thumb-up",onClick:m=>B(a.data)},{default:u(()=>e[2]||(e[2]=[O("Yes")])),_:2},1032,["onClick"]),r(S,{class:"btn-unsolve",variant:"tonal","prepend-icon":"mdi-thumb-down",onClick:m=>A(a.data)},{default:u(()=>e[3]||(e[3]=[O("No")])),_:2},1032,["onClick"])]),_:2},1024)],64)):(d(),h("span",{key:6,class:x({unread:!a.isRead})},y(a.data.text),3)),a.author=="me"&&a.isRead?(d(),R(N,{key:7,icon:"mdi-check-all",color:"green-lighten-4",size:"x-small",style:{float:"right",margin:"0 -4px 0 8px",bottom:"-4px"}})):$("",!0)]),_:1},8,["participants","messageList","newMessagesCount","isOpen","showTypingIndicator"]),r(X,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),height:"100%",width:"100%"},{default:u(()=>[g("template",null,[r(L,{"aspect-ratio":1,class:"bg-white",src:"https://cdn.vuetifyjs.com/images/parallax/material.jpg",width:"100%"})])]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},ue=Z(),ce=j(ie);ce.use(ue).use(ee).mount("#app");
