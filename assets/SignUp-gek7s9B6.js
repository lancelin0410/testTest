import{r as b,j as S,w as R,I as k,J as a,E as e,H as y,C as o,L as i,M as p,O as l,N as h,S as $}from"./@vue-B0j_qcai.js";import{u as B}from"./vue-i18n-DzMZFiEd.js";import{u as A,e as E,E as D,D as I,N as w,g as v,m as M,f as T,O as x,o as j,k as G}from"./@ionic-18nICBu3.js";import{g as q,h as z}from"./ionicons-CdrslGsx.js";import{u as F,h as H,b as J,j as K}from"./index-CBAZMc4h.js";import"./@intlify-BAcCFw_v.js";import"./@stencil-DBaMOtEh.js";import"./@capacitor-CHoHO2YB.js";import"./vue-router-BLYQmdkJ.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./pinia-Ds326xZN.js";import"./jsencrypt-Ve0Y4aUG.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";const Q={style:{"font-weight":"1000"}},W={class:"input-prefix",slot:"start"},X=i("span",{class:"input-prefix",slot:"start"},"OTP",-1),Y={class:"note"},Z=i("div",{class:"sign-up-divider"},[i("hr"),i("div",{class:"divider-text"},"OR")],-1),he={__name:"SignUp",setup(ee){const{t:d}=B(),U=A(),u=F(),m=H(),{getPublicUrl:V}=J(),f=b(!1),t=S({promotionCode:u.inviteCode,device:"h5",mobile:"",sessionId:"",code:""});let C;const _=Number(u.appConfig.callPrefixes),g=b(d("account.button.otp")),c=b(0),P=async()=>{if(c.value==0){if(!t.mobile||t.mobile.length==0){await(await toastController.create({message:d("account.resister.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}const s=await K({mobile:u.encrypt.encrypt(t.mobile),callPrefixes:_});s.code==="00000"&&(t.sessionId=s.data.sessionId,c.value=60,L())}},L=()=>{g.value="".concat(c.value,"s"),C=setInterval(()=>{c.value>0?(c.value--,g.value="".concat(c.value,"s")):(g.value=d("account.button.otp"),c.value=0,clearInterval(C))},1e3)},N=async()=>{if(!t.mobile||t.mobile.length==0){await(await toastController.create({message:d("account.resister.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}if(!t.code||t.code.length==0){await(await toastController.create({message:d("account.resister.toast.verificationCode"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}u.fullLoading=!0,await m.mobileRegister(t),u.fullLoading=!1},O=async()=>{u.fullLoading=!0,await m.anonymousRegister(t),u.fullLoading=!1};return R(()=>m.isLogin,()=>{m.isLogin&&U.replace("/")}),(s,n)=>(y(),k(e(G),{class:"sign-up"},{default:a(()=>[o(e(E),{src:e(V)("/banner.webp")},null,8,["src"]),o(e(j),null,{default:a(()=>[o(e(D),{lines:"none"},{default:a(()=>[i("h5",Q,p(s.$t("login.header.signUp")),1),o(e(I),null,{default:a(()=>[o(e(w),{modelValue:t.mobile,"onUpdate:modelValue":n[0]||(n[0]=r=>t.mobile=r),fill:"outline",placeholder:"Phone Number"},{default:a(()=>[i("span",W,"+"+p(e(_)),1)]),_:1},8,["modelValue"])]),_:1}),o(e(I),null,{default:a(()=>[o(e(w),{modelValue:t.code,"onUpdate:modelValue":n[1]||(n[1]=r=>t.code=r),placeholder:s.$t("account.withdrawalPassword.label.otpPlaceholder")},{default:a(()=>[X,o(e(v),{slot:"end",class:"btn-otp",color:"medium",style:{color:"#00ff84"},onClick:P},{default:a(()=>[l(p(g.value),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),o(e(I),null,{default:a(()=>[o(e(M),null,{default:a(()=>[i("div",{style:{"font-size":"0.8rem","font-weight":"1000","margin-bottom":"8px",display:"flex","align-items":"center"},onClick:n[2]||(n[2]=h(r=>f.value=!f.value,["stop"]))},[l(" Enter Referral / Promo Code "),o(e(T),{icon:f.value?e(q):e(z),style:{"margin-left":"4px"}},null,8,["icon"])]),f.value?(y(),k(e(w),{key:0,modelValue:t.promotionCode,"onUpdate:modelValue":n[3]||(n[3]=r=>t.promotionCode=r),fill:"outline"},null,8,["modelValue"])):$("",!0)]),_:1})]),_:1})]),_:1}),o(e(x),{checked:!0,"label-placement":"end"},{default:a(()=>[l(" I agree to the "),i("a",{href:"#",style:{color:"#fff","font-weight":"800","text-decoration":"none"},onClick:n[4]||(n[4]=r=>r.stopPropagation())},"User Agreement"),l(" & confirm I am at least 18 years old ")]),_:1}),o(e(x),{checked:!0,"label-placement":"end"},{default:a(()=>[l(" I agree to receive marketing promotions from BC.GAME. ")]),_:1}),o(e(v),{class:"btn-sign-up",expand:"block",onClick:h(N,["stop"])},{default:a(()=>[l(p(s.$t("login.header.signUp")),1)]),_:1}),i("div",Y,[l(" Already have an account? "),o(e(v),{class:"btn-sing-in",fill:"clear","router-link":"/login/signIn"},{default:a(()=>[l("Sign In")]),_:1})]),Z,o(e(v),{class:"btn-sign-up",expand:"block",onClick:h(O,["stop"])},{default:a(()=>[l(p(s.$t("login.header.signUpOneClick")),1)]),_:1})]),_:1})]),_:1}))}};export{he as default};
