import{k as x,r as I,w as B,I as L,J as o,G as t,K as S,D as a,M as m,P as p,R as i,Q as U}from"./@vue-3Wdfxk3_.js";import{u as $}from"./vue-i18n-BmGSZPWT.js";import{u as A,j as G,y as M,z as _,E as v,l as d,v as O,p as R,t as b}from"./@ionic-ChxHNRcu.js";import{u as T,a as D,f as E,b as F}from"./index-BtfuBToB.js";import{u as j}from"./common-icPcROaw.js";import"./@intlify-BAcCFw_v.js";import"./@ionic_components_1-CAQXnsIn.js";import"./@stencil-C-gE1UvY.js";import"./@ionic_components_2-DUGZJZYA.js";import"./@capacitor-CHoHO2YB.js";import"./vue-router-CvOicv45.js";import"./ionicons-DCtDYcIg.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./pinia-i8UTD9O9.js";import"./jsencrypt-Ve0Y4aUG.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";const q={style:{"font-weight":"1000"}},z={slot:"start"},J=m("span",{slot:"start"},"OTP",-1),K={class:"note"},gt={__name:"SignIn",setup(Q){const{t:l}=$(),P=A(),u=T(),f=D(),{getPublicUrl:k}=j(),{headerAnimation:y}=F(),e=x({device:"h5",mobile:"",sessionId:"",code:""});let w;const h=Number(u.appConfig.callPrefixes),c=I(l("account.button.otp")),n=I(0),C=async()=>{if(n.value==0){if(!e.mobile||e.mobile.length==0){await(await b.create({message:l("account.resister.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}const s=await E({mobile:u.encrypt.encrypt(e.mobile),callPrefixes:h});s.code==="00000"&&(e.sessionId=s.data.sessionId,n.value=60,V())}},V=()=>{c.value="".concat(n.value,"s"),w=setInterval(()=>{n.value>0?(n.value--,c.value="".concat(n.value,"s")):(c.value=l("account.button.otp"),n.value=0,clearInterval(w))},1e3)},N=async()=>{if(!e.mobile||e.mobile.length==0){await(await b.create({message:l("account.resister.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}if(!e.code||e.code.length==0){await(await b.create({message:l("account.resister.toast.verificationCode"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}u.fullLoading=!0,await f.mobileLogin(e),u.fullLoading=!1};return B(()=>f.isLogin,()=>{f.isLogin&&P.navigate("/","back","replace",y)}),(s,r)=>(S(),L(t(R),{class:"sign-in"},{default:o(()=>[a(t(G),{src:t(k)("/banner.webp")},null,8,["src"]),a(t(O),null,{default:o(()=>[a(t(M),{lines:"none"},{default:o(()=>[m("h5",q,p(s.$t("login.header.signIn")),1),a(t(_),null,{default:o(()=>[a(t(v),{modelValue:e.mobile,"onUpdate:modelValue":r[0]||(r[0]=g=>e.mobile=g),fill:"outline",placeholder:"Phone Number"},{default:o(()=>[m("span",z,"+"+p(t(h)),1)]),_:1},8,["modelValue"])]),_:1}),a(t(_),null,{default:o(()=>[a(t(v),{modelValue:e.code,"onUpdate:modelValue":r[1]||(r[1]=g=>e.code=g),placeholder:s.$t("account.withdrawalPassword.label.otpPlaceholder")},{default:o(()=>[J,a(t(d),{slot:"end",class:"btn-otp",color:"medium",style:{color:"#00ff84"},onClick:C},{default:o(()=>[i(p(c.value),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1}),a(t(d),{class:"btn-forget",fill:"clear","router-link":"/login/forgetPW"},{default:o(()=>[i("Forget your password?")]),_:1}),a(t(d),{class:"btn-sign-in",expand:"block",onClick:U(N,["stop"])},{default:o(()=>[i(p(s.$t("login.header.signIn")),1)]),_:1}),m("div",K,[i(" New to BC.GAME? "),a(t(d),{class:"btn-sing-up",fill:"clear","router-link":"/login/signUp"},{default:o(()=>[i("Create account")]),_:1})])]),_:1})]),_:1}))}};export{gt as default};
