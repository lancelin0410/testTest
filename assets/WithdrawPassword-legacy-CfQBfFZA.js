System.register(["./vue-i18n-legacy-3mSkocii.js","./@ionic-legacy-BCXuxJR0.js","./ionicons-legacy-D1xXFoHn.js","./index-legacy-Cjm6cWs0.js","./withdraw-legacy-YIumUkEn.js","./@vue-legacy-BTGNLlqW.js","./@intlify-legacy-DDHA1rkh.js","./@stencil-legacy-B3F1rWbF.js","./@capacitor-legacy-0yG8iurR.js","./vue-router-legacy-BIhpig1s.js","./localforage-legacy-D0pVUvDl.js","./@adjustcom-legacy-QP0zxLxB.js","./pinia-legacy-BNyWqaqq.js","./jsencrypt-legacy-DGJHbPQ6.js","./pinia-plugin-persistedstate-2-legacy-CtlOhiZd.js","./@awesome-cordova-plugins-legacy-CuOL20OL.js","./rxjs-legacy-C12cs3ed.js","./tslib-legacy-BRpw1qYg.js"],(function(a,e){"use strict";var t,o,s,l,r,n,i,d,c,w,u,p,g,h,m,f,y,P,b,v,j,x,_,k,V,I,O,C,R,$,L;return{setters:[a=>{t=a.u},a=>{o=a.K,s=a.u,l=a.o,r=a.D,n=a.N,i=a.f,d=a.T,c=a.g,w=a.E,u=a.k,p=a.t},a=>{g=a.n,h=a.x},a=>{m=a.u,f=a.m,y=a.i},a=>{P=a.f,b=a.h},a=>{v=a.j,j=a.r,x=a.c,_=a.I,k=a.J,V=a.E,I=a.H,O=a.C,C=a.S,R=a.L,$=a.M,L=a.O},null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var e=document.createElement("style");e.textContent=".withdraw-password{background-color:var(--ion-background-color)}.withdraw-password ion-list ion-item{--ion-item-background: transparent;margin-bottom:8px}.withdraw-password .btn-otp{--background: var(--ion-background-color);--background-activated: var(--ion-background-color);min-height:2rem}.withdraw-password .btn-otp::part(native){padding:2px 16px}.withdraw-password .btn-confirm{--background: linear-gradient(90deg, #24ee89, #9fe871);--background-activated: linear-gradient(40deg, #24ee89, #9fe871);--color: #000000;--box-shadow: 0 0 12px #23ee884d, 0 -2px #1dca6a inset;font-size:1.2rem;min-height:3rem;margin:16px}\n",document.head.appendChild(e);const U={slot:"start"},E=R("span",{slot:"start"},"OTP",-1);a("default",{__name:"WithdrawPassword",setup(a){const{t:e}=t(),S=s(),T=m(),B=v({withdrawPasswordOri:"",withdrawPassword:"",withdrawPasswordRepeat:"",mobile:"",code:"",sessionId:""});let N;const z=Number(T.appConfig.callPrefixes),D=j(0),H=j(e("account.button.otp")),J=j(!1);x((()=>Boolean(B.mobile))),o((async()=>{T.barLoading=!0;const a=await f();"00000"===a.code&&(J.value=Boolean(a.data.withdrawPasswordValid)),T.barLoading=!1}));const K=async()=>{if(0==D.value){if(!B.mobile||0==B.mobile.length){const a=await p.create({message:e("account.withdrawalPassword.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0});return void(await a.present())}const a=await y({mobile:T.encrypt.encrypt(B.mobile),callPrefixes:z});"00000"===a.code&&(B.sessionId=a.data.sessionId,D.value=60,M())}},M=()=>{H.value=`${D.value}s`,N=setInterval((()=>{D.value>0?(D.value--,H.value=`${D.value}s`):(H.value=e("account.button.otp"),D.value=0,clearInterval(N))}),1e3)},W=async()=>{if(J.value&&(!B.withdrawPasswordOri||0==B.withdrawPasswordOri.length)){const a=await p.create({message:e("account.withdrawalPassword.toast.withdrawPasswdOri"),duration:1500,position:"top",color:"warning",translucent:!0});return void(await a.present())}if(!B.withdrawPassword||0==B.withdrawPassword.length){const a=await p.create({message:e("account.withdrawalPassword.toast.withdrawPasswd"),duration:1500,position:"top",color:"warning",translucent:!0});return void(await a.present())}if(B.withdrawPassword!==B.withdrawPasswordRepeat){const a=await p.create({message:e("account.withdrawalPassword.toast.withdrawPasswdRepeat"),duration:1500,position:"top",color:"warning",translucent:!0});return void(await a.present())}if(!B.mobile||0==B.mobile.length){const a=await p.create({message:e("account.withdrawalPassword.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0});return void(await a.present())}if(!B.code||0==B.code.length){const a=await p.create({message:e("account.withdrawalPassword.toast.verificationCode"),duration:1500,position:"top",color:"warning",translucent:!0});return void(await a.present())}let a;if(T.fullLoading=!0,a=J.value?await P({oldPassword:T.encrypt.encrypt(B.withdrawPasswordOri),password:T.encrypt.encrypt(B.withdrawPassword),confirmPassword:T.encrypt.encrypt(B.withdrawPasswordRepeat),code:B.code,sessionId:B.sessionId}):await b({password:T.encrypt.encrypt(B.withdrawPassword),confirmPassword:T.encrypt.encrypt(B.withdrawPasswordRepeat),code:B.code,sessionId:B.sessionId}),"00000"===a.code){const a=await p.create({message:"Success",duration:1500,position:"top",translucent:!0,icon:h,color:"success"});await a.present(),setTimeout((()=>S.back()),1e3)}T.fullLoading=!1};return(a,e)=>(I(),_(V(u),{class:"withdraw-password"},{default:k((()=>[V(T).barLoading?C("",!0):(I(),_(V(l),{key:0},{default:k((()=>[O(V(w),{lines:"none"},{default:k((()=>[J.value?(I(),_(V(r),{key:0,style:{margin:"32px 0"}},{default:k((()=>[O(V(n),{modelValue:B.withdrawPasswordOri,"onUpdate:modelValue":e[0]||(e[0]=a=>B.withdrawPasswordOri=a),type:"password",fill:"outline",placeholder:a.$t("account.withdrawalPassword.label.originalPassword")},{default:k((()=>[O(V(i),{slot:"start",icon:V(g)},null,8,["icon"]),O(V(d),{slot:"end",color:"medium"})])),_:1},8,["modelValue","placeholder"])])),_:1})):C("",!0),O(V(r),{style:{margin:"8px 0"}},{default:k((()=>[O(V(n),{modelValue:B.withdrawPassword,"onUpdate:modelValue":e[1]||(e[1]=a=>B.withdrawPassword=a),type:"password",fill:"outline",placeholder:a.$t("account.withdrawalPassword.label.password")},{default:k((()=>[O(V(i),{slot:"start",icon:V(g)},null,8,["icon"]),O(V(d),{slot:"end",color:"medium"})])),_:1},8,["modelValue","placeholder"])])),_:1}),O(V(r),{style:{margin:"8px 0 16px 0"}},{default:k((()=>[O(V(n),{modelValue:B.withdrawPasswordRepeat,"onUpdate:modelValue":e[2]||(e[2]=a=>B.withdrawPasswordRepeat=a),type:"password",fill:"outline",placeholder:a.$t("account.withdrawalPassword.label.repeatPassword")},{default:k((()=>[O(V(i),{slot:"start",icon:V(g)},null,8,["icon"]),O(V(d),{slot:"end",color:"medium"})])),_:1},8,["modelValue","placeholder"])])),_:1}),O(V(r),{style:{margin:"16px 0 8px 0"}},{default:k((()=>[O(V(n),{modelValue:B.mobile,"onUpdate:modelValue":e[3]||(e[3]=a=>B.mobile=a),fill:"outline",placeholder:a.$t("account.withdrawalPassword.label.phone")},{default:k((()=>[R("span",U,"+"+$(V(z)),1)])),_:1},8,["modelValue","placeholder"])])),_:1}),O(V(r),{style:{margin:"8px 0"}},{default:k((()=>[O(V(n),{modelValue:B.code,"onUpdate:modelValue":e[4]||(e[4]=a=>B.code=a),fill:"outline",placeholder:a.$t("account.withdrawalPassword.label.otpPlaceholder")},{default:k((()=>[E,O(V(c),{slot:"end",class:"btn-otp",color:"medium",style:{color:"#00ff84"},onClick:K},{default:k((()=>[L($(H.value),1)])),_:1})])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1}),O(V(c),{class:"btn-confirm",expand:"block",shape:"round",onClick:W},{default:k((()=>[L("Confirm")])),_:1})])),_:1}))])),_:1}))}})}}}));
