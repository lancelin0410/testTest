import{a9 as x,l as B,aa as N,ab as L,r as I,ac as S,j as U,w as o,u as e,D as $,d as A,f as a,x as M,M as O,h as f,y as d,H as _,ad as v,v as p,B as i,K as T,z as D,A as F,C as G,t as b,ae as R}from"./index-BWYPlUKf.js";const j={style:{"font-weight":"1000"}},q={slot:"start"},z=f("span",{slot:"start"},"OTP",-1),E={class:"note"},W={__name:"SignIn",setup(H){const{t:l}=x(),C=$(),u=B(),g=N(),{getPublicUrl:P}=G(),t=L({device:"h5",mobile:"",sessionId:"",code:""});let w;const h=Number(u.appConfig.callPrefixes),c=I(l("account.button.otp")),n=I(0),y=async()=>{if(n.value==0){if(!t.mobile||t.mobile.length==0){await(await b.create({message:l("account.resister.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}const s=await R({mobile:u.encrypt.encrypt(t.mobile),callPrefixes:h});s.code==="00000"&&(t.sessionId=s.data.sessionId,n.value=60,V())}},V=()=>{c.value="".concat(n.value,"s"),w=setInterval(()=>{n.value>0?(n.value--,c.value="".concat(n.value,"s")):(c.value=l("account.button.otp"),n.value=0,clearInterval(w))},1e3)},k=async()=>{if(!t.mobile||t.mobile.length==0){await(await b.create({message:l("account.resister.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}if(!t.code||t.code.length==0){await(await b.create({message:l("account.resister.toast.verificationCode"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}u.fullLoading=!0,await g.mobileLogin(t),u.fullLoading=!1};return S(()=>g.isLogin,()=>{g.isLogin&&C.replace("/")}),(s,r)=>(A(),U(e(F),{class:"sign-in"},{default:o(()=>[a(e(M),{src:e(P)("/banner.webp")},null,8,["src"]),a(e(D),null,{default:o(()=>[a(e(O),{lines:"none"},{default:o(()=>[f("h5",j,d(s.$t("login.header.signIn")),1),a(e(_),null,{default:o(()=>[a(e(v),{modelValue:t.mobile,"onUpdate:modelValue":r[0]||(r[0]=m=>t.mobile=m),fill:"outline",placeholder:"Phone Number"},{default:o(()=>[f("span",q,"+"+d(e(h)),1)]),_:1},8,["modelValue"])]),_:1}),a(e(_),null,{default:o(()=>[a(e(v),{modelValue:t.code,"onUpdate:modelValue":r[1]||(r[1]=m=>t.code=m),placeholder:s.$t("account.withdrawalPassword.label.otpPlaceholder")},{default:o(()=>[z,a(e(p),{slot:"end",class:"btn-otp",color:"medium",style:{color:"#00ff84"},onClick:y},{default:o(()=>[i(d(c.value),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1}),a(e(p),{class:"btn-forget",fill:"clear","router-link":"/login/forgetPW"},{default:o(()=>[i("Forget your password?")]),_:1}),a(e(p),{class:"btn-sign-in",expand:"block",onClick:T(k,["stop"])},{default:o(()=>[i(d(s.$t("login.header.signIn")),1)]),_:1}),f("div",E,[i(" New to BC.GAME? "),a(e(p),{class:"btn-sing-up",fill:"clear","router-link":"/login/signUp"},{default:o(()=>[i("Create account")]),_:1})])]),_:1})]),_:1}))}};export{W as default};
