import{j as y,r as I,w as N,H as L,I as B,J as o,C as a,E as t,L as m,M as p,O as r,N as S}from"./@vue-FF6Ppp8k.js";import{u as U}from"./vue-i18n-Drh5Jv-N.js";import{e as $,D as O,C as _,K as v,g as d,n as M,l as T,u as A,t as b}from"./@ionic-LOXDGMDQ.js";import{c as D,u as E,a as F,k as G}from"./index-DXSjpOoF.js";import"./@intlify-BAcCFw_v.js";import"./@ionic_components_1-CfuvXJ2N.js";import"./@stencil-pJInS8Bp.js";import"./@ionic_components_2-BmE8Yi_w.js";import"./@capacitor-CHoHO2YB.js";import"./vue-router-BCw8xDr3.js";import"./ionicons-BuhCiVJn.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./pinia-BYTB-Pq_.js";import"./jsencrypt-Ve0Y4aUG.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";const R={style:{"font-weight":"1000"}},j={class:"input-prefix",slot:"start"},q=m("span",{class:"input-prefix",slot:"start"},"OTP",-1),H={class:"note"},dt={__name:"SignIn",setup(J){const{t:l}=U(),C=A(),u=D(),f=E(),{getPublicUrl:P}=F(),e=y({device:"h5",mobile:"",sessionId:"",code:""});let w;const h=Number(u.appConfig.callPrefixes),c=I(l("account.button.otp")),n=I(0),k=async()=>{if(n.value==0){if(!e.mobile||e.mobile.length==0){await(await b.create({message:l("account.resister.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}const s=await G({mobile:u.encrypt.encrypt(e.mobile),callPrefixes:h});s.code==="00000"&&(e.sessionId=s.data.sessionId,n.value=60,V())}},V=()=>{c.value="".concat(n.value,"s"),w=setInterval(()=>{n.value>0?(n.value--,c.value="".concat(n.value,"s")):(c.value=l("account.button.otp"),n.value=0,clearInterval(w))},1e3)},x=async()=>{if(!e.mobile||e.mobile.length==0){await(await b.create({message:l("account.resister.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}if(!e.code||e.code.length==0){await(await b.create({message:l("account.resister.toast.verificationCode"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}u.fullLoading=!0,await f.mobileLogin(e),u.fullLoading=!1};return N(()=>f.isLogin,()=>{f.isLogin&&C.back("/")}),(s,i)=>(L(),B(t(T),{class:"sign-in"},{default:o(()=>[a(t($),{src:t(P)("/banner.webp")},null,8,["src"]),a(t(M),null,{default:o(()=>[a(t(O),null,{default:o(()=>[m("h5",R,p(s.$t("login.header.signIn")),1),a(t(_),{lines:"none"},{default:o(()=>[a(t(v),{modelValue:e.mobile,"onUpdate:modelValue":i[0]||(i[0]=g=>e.mobile=g),fill:"outline",placeholder:"Phone Number"},{default:o(()=>[m("span",j,"+"+p(t(h)),1)]),_:1},8,["modelValue"])]),_:1}),a(t(_),{lines:"none"},{default:o(()=>[a(t(v),{modelValue:e.code,"onUpdate:modelValue":i[1]||(i[1]=g=>e.code=g),placeholder:s.$t("account.withdrawalPassword.label.otpPlaceholder")},{default:o(()=>[q,a(t(d),{slot:"end",class:"btn-otp",color:"medium",style:{color:"#00ff84"},onClick:k},{default:o(()=>[r(p(c.value),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1}),a(t(d),{class:"btn-forget",fill:"clear","router-link":"/login/forgetPW"},{default:o(()=>[r("Forget your password?")]),_:1}),a(t(d),{class:"btn-sign-in",expand:"block",onClick:S(x,["stop"])},{default:o(()=>[r(p(s.$t("login.header.signIn")),1)]),_:1}),m("div",H,[r(" New to BC.GAME? "),a(t(d),{class:"btn-sing-up",fill:"clear","router-link":"/login/signUp"},{default:o(()=>[r("Create account")]),_:1})])]),_:1})]),_:1}))}};export{dt as default};
