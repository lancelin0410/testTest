import{u as R}from"./vue-i18n-DJaGXZoQ.js";import{u as x,K as p,d as b,L as g,f as v,n as S,P as U,j as B,t as c}from"./@ionic-Ci9irSPF.js";import{a as O,c as T,b as L,f as N}from"./index-CvJSsnnw.js";import{s as M}from"./withdraw-gMvSVrc2.js";import{j,r as I,I as D,J as r,E as a,H as W,C as s,L as i,M as w,O as _}from"./@vue-BnNAOHbh.js";import"./@intlify-BAcCFw_v.js";import"./@ionic_components_1-CG1weR9z.js";import"./@stencil-pJInS8Bp.js";import"./@ionic_components_2-DZGN-9Y0.js";import"./@capacitor-CHoHO2YB.js";import"./vue-router-WMmcqR98.js";import"./ionicons-vS9WG2d3.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./pinia-CIp5G_9Q.js";import"./jsencrypt-Ve0Y4aUG.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";const q={style:{margin:"4px 0"}},A={class:"block-title"},E={style:{margin:"4px 0"}},F={class:"block-title"},G={style:{margin:"4px 0"}},H={class:"block-title"},J={class:"input-prefix",slot:"start"},K=i("br",null,null,-1),z=i("span",{class:"input-prefix",slot:"start"},"OTP",-1),Pt={__name:"WithdrawPassword",setup(Q){const{t:l}=R(),V=x(),f=O(),m=T(),{getImgUrl:h}=L(),t=j({withdrawPasswd:"",withdrawPasswdRepeat:"",mobile:m.userInfo.mobile?m.userInfo.mobile.substring(2):"",verificationCode:"",canModifyPwd:!m.userInfo.mobile});let P;const C="+91",n=I(0),u=I(l("account.button.otp")),k=async()=>{if(n.value==0){if(!t.mobile||t.mobile.length==0){await(await c.create({message:l("account.withdrawalPassword.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}const e=await N({tel:t.mobile});e.state=="200"&&(n.value=e.resultData,y())}},y=()=>{u.value="".concat(n.value,"s"),P=setInterval(()=>{n.value>0?(n.value--,u.value="".concat(n.value,"s")):(u.value=l("account.button.otp"),n.value=0,clearInterval(P))},1e3)},$=async()=>{if(!t.withdrawPasswd||t.withdrawPasswd.length==0){await(await c.create({message:l("account.withdrawalPassword.toast.withdrawPasswd"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}if(t.withdrawPasswd!==t.withdrawPasswdRepeat){await(await c.create({message:l("account.withdrawalPassword.toast.withdrawPasswdRepeat"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}if(!t.mobile||t.mobile.length==0){await(await c.create({message:l("account.withdrawalPassword.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}if(!t.verificationCode||t.verificationCode.length==0){await(await c.create({message:l("account.withdrawalPassword.toast.verificationCode"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}f.fullLoading=!0,(await M({withdrawPasswd:t.withdrawPasswd,withdrawPasswdRepeat:t.withdrawPasswdRepeat,mobile:t.canModifyPwd?t.mobile:null,verificationCode:t.verificationCode})).state=="200"&&(await(await c.create({message:"Success",duration:1500,position:"top",translucent:!0,icon:checkmarkOutline,color:"success"})).present(),setTimeout(()=>V.back(),1e3)),f.fullLoading=!1};return(e,o)=>(W(),D(a(B),{class:"withdraw-password"},{default:r(()=>[s(a(S),null,{default:r(()=>[i("div",q,[i("div",A,w(e.$t("account.withdrawalPassword.label.password")),1),s(a(p),{modelValue:t.withdrawPasswd,"onUpdate:modelValue":o[0]||(o[0]=d=>t.withdrawPasswd=d),type:"password",placeholder:e.$t("account.withdrawalPassword.label.password")},{default:r(()=>[s(a(b),{class:"input-prefix",slot:"start",src:a(h)("/account/w-password.png")},null,8,["src"]),s(a(g),{slot:"end",color:"medium"})]),_:1},8,["modelValue","placeholder"])]),i("div",E,[i("div",F,w(e.$t("account.withdrawalPassword.label.repeatPassword")),1),s(a(p),{modelValue:t.withdrawPasswdRepeat,"onUpdate:modelValue":o[1]||(o[1]=d=>t.withdrawPasswdRepeat=d),type:"password",placeholder:e.$t("account.withdrawalPassword.label.repeatPassword")},{default:r(()=>[s(a(b),{class:"input-prefix",slot:"start",src:a(h)("/account/w-password.png")},null,8,["src"]),s(a(g),{slot:"end",color:"medium"})]),_:1},8,["modelValue","placeholder"])]),i("div",G,[i("div",H,w(e.$t("account.withdrawalPassword.label.phone")),1),s(a(p),{modelValue:t.mobile,"onUpdate:modelValue":o[2]||(o[2]=d=>t.mobile=d),placeholder:e.$t("account.withdrawalPassword.label.phone")},{default:r(()=>[i("span",J,w(a(C)),1)]),_:1},8,["modelValue","placeholder"]),K,s(a(p),{modelValue:t.verificationCode,"onUpdate:modelValue":o[3]||(o[3]=d=>t.verificationCode=d),placeholder:e.$t("account.withdrawalPassword.label.otpPlaceholder")},{default:r(()=>[z,s(a(v),{slot:"end",class:"btn-otp",style:{color:"#c5000f"},onClick:k},{default:r(()=>[_(w(u.value),1)]),_:1})]),_:1},8,["modelValue","placeholder"])])]),_:1}),s(a(U),null,{default:r(()=>[s(a(v),{class:"btn-confirm",expand:"block",shape:"round",onClick:$},{default:r(()=>[_(w(e.$t("account.button.confirm")),1)]),_:1})]),_:1})]),_:1}))}};export{Pt as default};
