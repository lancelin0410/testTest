import{aS as x,q as R,ax as D,aX as E,aK as d,s as V,bH as i,I as n,v as g,bJ as H,bz as $,b9 as m,u as y,at as b,H as O,F as w,aV as j,t as N,r as F}from"./@vue-Dkad1Scs.js";import{V as K,a as L,b as M,c as _,d as W,e as G,f as X,g as Y,h as Q,i as Z,j as ee}from"./vuetify-Bz6dI_0v.js";/* empty css             */import{V as te}from"./vue3-beautiful-chat-DLJUIo1Z.js";import"./vue-BghDAyl9.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const v of s.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&c(v)}).observe(document,{childList:!0,subtree:!0});function u(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(t){if(t.ep)return;t.ep=!0;const s=u(t);fetch(t.href,s)}})();async function S({url:r,method:l,data:u}){console.log(r);const c="https://www.teenteen123.com",t=101,s=new AbortController;setTimeout(()=>s.abort(),3e4);const v={appId:t,languageType:"EN",sign:"9310a4024d28e726",uid:"e15f5aadb3c3470ebda51c53486f40e1"};let T;return await fetch(`${c}${r}`,{method:l,body:JSON.stringify({...v,...u}),headers:{"Content-Type":"application/json"},signal:s.signal}).then(f=>f.json()).catch(f=>console.error("Error:",f)).then(f=>{f.state=="200"?T=f.resultData:console.error("Error:",f.msg)}),T}function ae(r){return S({url:"/customer/index",method:"POST",data:r})}function oe(r){return S({url:"/customer/get",method:"POST",data:r})}function se(r){return S({url:"/customer/success",method:"POST",data:r})}function le(r){return S({url:"/customer/fail",method:"POST",data:r})}const ne={class:"customer-info"},re=["innerHTML"],ie="https://storage.googleapis.com/baowang-admin",ue={__name:"App",setup(r){const l=x([]),u=x([]),c=x({}),t=x(!0),s=x(!1),v=x(!1),T={header:{bg:"#ffffff",text:"#4e8cff"},launcher:{bg:"#4e8cff"},messageList:{bg:"#eaeaea"},sentMessage:{bg:"#4e8cff",text:"#ffffff"},receivedMessage:{bg:"#ffffff",text:"#222222"},userInput:{bg:"#f4f7f9",text:"#565867"}},f=R(()=>u.value.filter(o=>!o.isRead.length).length),P=R(()=>s.value?String(l.value[0].id):""),k=(o=!1)=>{o&&(u.value=[]),ae().then(e=>{l.value=[e.customerAccount].map(C=>(C.imageUrl=ie+C.imageUrl,C)),console.log(JSON.parse(e.data)),u.value.push({id:0,author:l.value[0].id,type:"text",isRead:t.value,data:{type:e.type,solveType:e.solveType,text:e.reply||"Hello Sir is there any thing I can help you with?",list:JSON.parse(e.data)}}),s.value=!1}).catch(e=>console.log(e))};D(()=>k(!0));const B=o=>new Promise(e=>setTimeout(e,o)),A=async o=>{switch(o.display&&o.display.length>0&&p({author:"me",type:"text",isRead:t.value,data:{text:o.display}}),s.value=!0,o.type){case-1:p({author:l.value[0].id,type:"text",isRead:t.value,data:{type:o.type,solveType:o.solveType,text:"Please click the button below to contact Senior Customer Service",btnText:"Senior Customer Service",link:o.link}});break;case 0:k();break;case 1:p({author:l.value[0].id,type:"text",isRead:t.value,data:{type:o.type,solveType:o.solveType,text:o.text}});break;default:oe({questionId:o.id}).then(e=>{console.log(e),!e||!e.data&&!e.reply?p({author:l.value[0].id,type:"text",isRead:t.value,data:{type:0,solveType:e.solveType,text:"No record Data"}}):(console.log(JSON.parse(e.data||"[]")),console.log(JSON.parse(e.solveConfig||"[]")),[1,2].includes(e.solveType)&&e.solveConfig&&(c.value=JSON.parse(e.solveConfig)),p({author:l.value[0].id,type:"text",isRead:t.value,data:{type:e.type,solveType:e.solveType,text:e.reply||"",list:JSON.parse(e.data||"[]")}}))}).catch(e=>console.log(e));break}},p=async o=>{o.id==l.value[0].id&&await B(Math.random()*2*100),s.value=!1,u.value.push(o)},J=o=>{try{p({author:"me",type:"text",isRead:t.value,data:{text:"Solve issue"}}),s.value=!0,se({questionId:o.id}).then(e=>{console.log(e),p({author:l.value[0].id,type:"text",isRead:t.value,data:{text:c.value.solve_reply}})})}catch(e){console.log(e)}},U=o=>{p({author:"me",type:"text",isRead:t.value,data:{text:"Unsolve issue"}}),s.value=!0,le({questionId:o.id}).then(e=>{console.log(e),p({author:l.value[0].id,type:"text",isRead:t.value,data:{type:2,solveType:o.solve_Type,text:c.value.unsolve_reply,list:[{type:0,display:c.value.unsolve_select_text},{type:-1,display:c.value.unsolve_customer_text,link:c.value.customer_link}]}})})},q=()=>{t.value=!0,u.value.forEach((o,e)=>{o.isRead=!0,e==u.value.length-1&&o.id!=0&&k()})},I=()=>{t.value=!1};return(o,e)=>{const C=E("beautiful-chat");return d(),V(Z,null,{default:i(()=>[n(Q,null,{default:i(()=>[n(C,{participants:l.value,onMessageWasSent:p,messageList:u.value,newMessagesCount:f.value||0,isOpen:t.value,open:q,close:I,showHeader:!0,showLauncher:!0,showTypingIndicator:P.value,showCloseButton:!1,colors:T,alwaysScrollToBottom:!0,disableUserListToggle:!0},{header:i(()=>{var a;return[e[1]||(e[1]=g("div",{class:"header-text"},"Customer Service Center",-1)),g("div",ne,[n(K,{size:"large",color:"surface-light"},{default:i(()=>{var h;return[n(L,{src:(h=l.value[0])==null?void 0:h.imageUrl},{error:i(()=>[n(M,{icon:"mdi-face-agent",size:"large",style:{height:"100%"}})]),_:1},8,["src"])]}),_:1}),H(g("span",null,m((a=l.value[0])==null?void 0:a.name)+" is serving",513),[[$,l.value[0]]])]),n(_,{class:"btn-close",icon:"$close",size:"large",variant:"text",onClick:I})]}),"text-message-body":i(({message:a})=>[a.data.type==-1?(d(),y(w,{key:0},[g("div",{class:b(["msg_text",{unread:!a.isRead}])},m(a.data.text),3),n(_,{class:"btn-cs","prepend-icon":"mdi-information",color:"primary",density:"compact",flat:"",block:"",href:a.data.link,target:"_blank"},{default:i(()=>[O(m(a.data.btnText),1)]),_:2},1032,["href"])],64)):a.data.type==1?(d(),y("div",{key:1,class:b({unread:!a.isRead}),innerHTML:a.data.text},null,10,re)):a.data.type==2?(d(),y(w,{key:2},[g("div",{class:b(["msg_text",{unread:!a.isRead}])},m(a.data.text),3),n(W,{density:"compact",lines:"one"},{default:i(()=>[(d(!0),y(w,null,j(a.data.list,(h,z)=>(d(),V(G,{key:z,title:h.display,"min-height":"1rem",onClick:pe=>A(h)},null,8,["title","onClick"]))),128))]),_:2},1024)],64)):a.data.type==3?(d(),y("div",{key:3,class:b(["msg_text",{unread:!a.isRead}])},m(a.data.text||"充值列表"),3)):a.data.type==4?(d(),y("div",{key:4,class:b(["msg_text",{unread:!a.isRead}])},m(a.data.text||"提現列表"),3)):(d(),y("span",{key:5,class:b({unread:!a.isRead})},m(a.data.text),3)),[1,2].includes(a.data.solveType)?(d(),y(w,{key:6},[e[4]||(e[4]=g("div",{style:{"text-align":"center",color:"#4e8cff"}},"Is the issue resolve?",-1)),n(X,{density:"compact",flat:""},{default:i(()=>[n(_,{class:"btn-solve",color:"primary","prepend-icon":"mdi-thumb-up",onClick:h=>J(a.data)},{default:i(()=>e[2]||(e[2]=[O("Yes")])),_:2},1032,["onClick"]),n(_,{class:"btn-unsolve",variant:"tonal","prepend-icon":"mdi-thumb-down",onClick:h=>U(a.data)},{default:i(()=>e[3]||(e[3]=[O("No")])),_:2},1032,["onClick"])]),_:2},1024)],64)):N("",!0),a.author=="me"&&a.isRead?(d(),V(M,{key:7,icon:"mdi-check-all",color:"green-lighten-4",size:"x-small",style:{float:"right",margin:"0 -4px 0 8px",bottom:"-4px"}})):N("",!0)]),_:1},8,["participants","messageList","newMessagesCount","isOpen","showTypingIndicator"]),n(Y,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=a=>v.value=a),height:"100%",width:"100%"},{default:i(()=>[g("template",null,[n(L,{"aspect-ratio":1,class:"bg-white",src:"https://cdn.vuetifyjs.com/images/parallax/material.jpg",width:"100%"})])]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},ce=ee(),de=F(ue);de.use(ce).use(te).mount("#app");
