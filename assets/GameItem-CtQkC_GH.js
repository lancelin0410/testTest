import{r as o,c as G,H as g,P as I,C as h,E as m,I as p,S as f,N as v}from"./@vue-FF6Ppp8k.js";import{u as S,e as d,t as y}from"./@ionic-LOXDGMDQ.js";import{f as L,h as C,i as k,c as w,a as D,s as B,j as F}from"./index-DXSjpOoF.js";import{d as R}from"./pinia-BYTB-Pq_.js";const b=R("game",()=>{const s=o([]),n=async()=>{const e=await L();e.state==="200"&&(s.value=e.resultData||[])},a=o([]),u=async()=>{const e=await C();e.state==="200"&&(a.value=e.resultData||[])},c=o([]),i=o([]),l=o([]),t=o([]);return{favoriteGameList:s,getFavoriteGames:n,recentGameList:a,getRecentGames:u,recentSearches:c,popularSearches:i,hotGameList:l,recommendGameList:t,getGameSearchData:async()=>{const e=await k();return e.state,code===200&&e&&(c.value=e.resultData.recentSearches||[],i.value=e.resultData.popularSearches||[],a.value=e.resultData.recentGameList||[],l.value=e.resultData.hotGameList||[],t.value=e.resultData.recommendGameList||[]),!0}}},{persistedState:{persist:!1}}),j={__name:"GameItem",props:{game:{type:Object,require:!0}},setup(s){const{getPublicUrl:n}=D(),a=s,u=S(),c=w(),i=b(),l=async()=>{c.fullLoading=!0,await B({gameCategoryId:a.game.gameCategoryId,routeId:a.game.routeId});const t=await F({platformGameId:a.game.tpgId,gameId:a.game.id,platformCode:a.game.platformCode,device:0});if(t.code==="00000"){const r=Capacitor.convertFileSrc(t.data);u.push({name:"GameWeb",query:{gameId:a.game.id,url:encodeURIComponent(r)}})}else await(await y.create({message:t.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present();c.fullLoading=!1};return G(()=>i.favoriteGameList.filter(r=>r.gameId==a.game.gameId||r.gameId==a.game.id).length>0),(t,r)=>(g(),I("div",{class:"game-item",onClick:v(l,["stop"])},[h(m(d),{class:"game-image",src:s.game.gameImage},null,8,["src"]),s.game.cornerMark==1?(g(),p(m(d),{key:0,class:"game-tag",src:m(n)("/home/icon-new.png")},null,8,["src"])):f("",!0),s.game.cornerMark==2?(g(),p(m(d),{key:1,class:"game-tag",src:m(n)("/home/icon-best.png")},null,8,["src"])):f("",!0)]))}};export{j as _};
