import{aS as b,ax as I,aX as M,aK as c,s as w,bH as d,I as p,v,b9 as g,u as y,H as C,F as x,aV as P,r as B}from"./@vue-Dkad1Scs.js";import{V as q,a as A,b as S,c as H,d as U,e as $,f as D,g as E,h as J}from"./vuetify-BVcx-I6O.js";/* empty css             */import{V as F}from"./vue3-beautiful-chat-DLJUIo1Z.js";import"./vue-BghDAyl9.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))u(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&u(f)}).observe(document,{childList:!0,subtree:!0});function i(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function u(a){if(a.ep)return;a.ep=!0;const l=i(a);fetch(a.href,l)}})();async function k({url:r,method:s,data:i}){console.log(r);const u="https://www.teenteen123.com",a=101,l=new AbortController;setTimeout(()=>l.abort(),3e4);const f={appId:a,languageType:"EN",sign:"9310a4024d28e726",uid:"e15f5aadb3c3470ebda51c53486f40e1"};let _;return await fetch(`${u}${r}`,{method:s,body:JSON.stringify({...f,...i}),headers:{"Content-Type":"application/json"},signal:l.signal}).then(n=>n.json()).catch(n=>console.error("Error:",n)).then(n=>{n.state=="200"?_=n.resultData:console.error("Error:",n.msg)}),_}function j(r){return k({url:"/customer/index",method:"POST",data:r})}function K(r){return k({url:"/customer/get",method:"POST",data:r})}function R(r){return k({url:"/customer/success",method:"POST",data:r})}function W(r){return k({url:"/customer/fail",method:"POST",data:r})}const z={class:"customer-info"},G={class:"msg_text"},X=["innerHTML"],Y={class:"msg_text"},Q={key:3},Z={key:4},ee={class:"msg_text"},te="https://storage.googleapis.com/baowang-admin",ae={__name:"App",setup(r){const s=b([]),i=b([]),u=b(0),a=b(!0),l={header:{bg:"#ffffff",text:"#4e8cff"},launcher:{bg:"#4e8cff"},messageList:{bg:"#eaeaea"},sentMessage:{bg:"#4e8cff",text:"#ffffff"},receivedMessage:{bg:"#ffffff",text:"#222222"},userInput:{bg:"#f4f7f9",text:"#565867"}},f=(t=!1)=>{t&&(i.value=[]),j().then(e=>{s.value=[e.customerAccount].map(m=>(m.imageUrl=te+m.imageUrl,m)),console.log(JSON.parse(e.data)),i.value.push({type:"text",author:s.value[0].id,data:{id:0,type:5,text:"Is the issue resolve?",list:{solve_reply:"Thank you for your inquiry,bye",customer_link:"https://wa.me/+918447756169",unsolve_reply:"Please click the button below to contact Senior Customer Service",unsolve_select_text:"Reselect the question.",unsolve_customer_text:"Request transfer to senior customer service"}}},{id:0,type:"text",author:s.value[0].id,data:{type:e.type,text:e.reply||"Hello Sir is there any thing I can help you with?",list:JSON.parse(e.data)}})}).catch(e=>console.log(e))};I(()=>f(!0));const _=async t=>{t.display&&t.display.length>0&&(u.value=a.value?u.value:u.value+1,n({author:"me",type:"text",data:{text:t.display}})),t.type==-1?n({author:s.value[0].id,type:"text",data:{type:t.type,text:"Please click the button below to contact Senior Customer Service",btnText:"Senior Customer Service",link:t.link}}):t.type==0?f():t.type==1?n({author:s.value[0].id,type:"text",data:{type:t.type,text:t.text}}):K({questionId:t.id}).then(e=>{console.log(e),!e||!e.data&&!e.reply?n({author:s.value[0].id,type:"text",data:{type:0,text:"No record Data"}}):(console.log(JSON.parse(e.data||"[]")),n({author:s.value[0].id,type:"text",data:{type:e.type,text:e.reply||"",list:JSON.parse(e.data||"[]")}}))}).catch(e=>console.log(e))},n=t=>{i.value.push(t)},O=t=>{n({author:"me",type:"text",data:{text:"Solve issue"}}),R({questionId:t.id}).then(e=>{console.log(e),n({author:s.value[0].id,type:"text",data:{text:t.list.solve_reply}})})},L=t=>{n({author:"me",type:"text",data:{text:"Unsolve issue"}}),W({questionId:t.id}).then(e=>{console.log(e),n({author:s.value[0].id,type:"text",data:{type:2,text:t.list.unsolve_reply,list:[{type:0,display:t.list.unsolve_select_text},{type:-1,display:t.list.unsolve_customer_text,link:t.list.customer_link}]}})})},V=()=>{a.value=!0,u.value=0,i.value[i.value.length-1].id!=0&&f()},N=()=>{a.value=!1};return(t,e)=>{const m=M("beautiful-chat");return c(),w(E,null,{default:d(()=>[p(D,null,{default:d(()=>[p(m,{participants:s.value,onMessageWasSent:n,messageList:i.value,newMessagesCount:u.value,isOpen:a.value,open:V,showHeader:!0,showLauncher:!0,showCloseButton:!1,colors:l,alwaysScrollToBottom:!0,disableUserListToggle:!0},{header:d(()=>{var o;return[e[0]||(e[0]=v("div",{class:"header-text"},"Customer Service Center",-1)),v("div",z,[p(q,{color:"surface-variant"},{default:d(()=>{var h;return[p(A,{src:(h=s.value[0])==null?void 0:h.imageUrl},null,8,["src"])]}),_:1}),v("span",null,g((o=s.value[0])==null?void 0:o.name)+" is serving",1)]),p(S,{class:"btn-close",icon:"$close",size:"large",variant:"text",onClick:N})]}),"text-message-body":d(({message:o})=>[o.data.type==-1?(c(),y(x,{key:0},[v("div",G,g(o.data.text),1),p(S,{density:"compact",flat:"",block:"",href:o.data.link,target:"_blank"},{default:d(()=>[C(g(o.data.btnText),1)]),_:2},1032,["href"])],64)):o.data.type==1?(c(),y("div",{key:1,innerHTML:o.data.text},null,8,X)):o.data.type==2?(c(),y(x,{key:2},[v("div",Y,g(o.data.text),1),p(H,{density:"compact",lines:"one"},{default:d(()=>[(c(!0),y(x,null,P(o.data.list,(h,T)=>(c(),w(U,{key:T,title:h.display,"min-height":"1rem",onClick:ne=>_(h)},null,8,["title","onClick"]))),128))]),_:2},1024)],64)):o.data.type==3?(c(),y("div",Q,"充值列表")):o.data.type==4?(c(),y("div",Z,"提現列表")):o.data.type==5?(c(),y(x,{key:5},[v("div",ee,g(o.data.text),1),p($,{density:"compact",flat:""},{default:d(()=>[p(S,{class:"btn-solve",onClick:h=>O(o.data)},{default:d(()=>e[1]||(e[1]=[C("Yes")])),_:2},1032,["onClick"]),p(S,{class:"btn-unsolve",onClick:h=>L(o.data)},{default:d(()=>e[2]||(e[2]=[C("No")])),_:2},1032,["onClick"])]),_:2},1024)],64)):(c(),y(x,{key:6},[C(g(o.data.text),1)],64))]),_:1},8,["participants","messageList","newMessagesCount","isOpen"])]),_:1})]),_:1})}}},oe=J(),se=B(ae);se.use(oe).use(F).mount("#app");
