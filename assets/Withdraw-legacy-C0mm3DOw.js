System.register(["./index-legacy-BizqwEaK.js","./withdraw-legacy-CFPhkEqK.js"],(function(t,a){"use strict";var e,n,i,o,r,l,d,s,c,p,u,w,g,h,m,b,f,v,x,k,y,A,P,C,_,$,L,z,N,D,S,B,j,I,W,V,E,F,O,U,q,H,M,J,K,R,Y,G,T;return{setters:[t=>{e=t.D,n=t.r,i=t.d,o=t.j,r=t.w,l=t.h,d=t.y,s=t.f,c=t.u,p=t.v,u=t.K,w=t.B,g=t.a5,h=t.S,m=t.a9,b=t.l,f=t.aa,v=t.ab,x=t.X,k=t.t,y=t.aH,A=t.ak,P=t.al,C=t.Y,_=t.x,$=t.J,L=t.aI,z=t.e,N=t.q,D=t.i,S=t.F,B=t.ad,j=t.M,I=t.H,W=t.z,V=t.a2,E=t.I,F=t.a4,O=t.a3,U=t.at,q=t.aJ,H=t.aK,M=t.A,J=t.C,K=t.s,R=t.aC},t=>{Y=t.g,G=t.a,T=t.c}],execute:function(){var a=document.createElement("style");a.textContent=".setPassword-popup{--background: var(--ion-background-light-color);--width: 88vw;--height: fit-content;--box-shadow: 0 28px 48px rgba(0, 0, 0, .4);--border-radius: 6px}.setPassword-popup .wrapper{margin:16px 8px;padding:0 12px;height:fit-content}.setPassword-popup .wrapper ion-img.btn-close{width:32px;height:32px;position:absolute;top:0;right:0}.setPassword-popup .wrapper .dialog-title{text-align:center;margin-bottom:8px}.setPassword-popup .wrapper .dialog-content{font-size:.9rem;color:#fff;padding:8px 4px;margin-bottom:8px}.setPassword-popup .wrapper .btn-group{display:flex;justify-content:space-between}.setPassword-popup .wrapper .btn-group ion-button{position:relative;color:#fff}.setPassword-popup .wrapper .btn-group ion-button.btn-confirm{--background: linear-gradient(90deg, #f78d22, #e34e04);--background-activated: linear-gradient(45deg, #f78d22, #e34e04)}.setPassword-popup .wrapper .btn-group ion-button.btn-cancel{--background: linear-gradient(0deg, #32b12f 0%, #10740b 100%);--background-activated: linear-gradient(30deg, #32b12f 0%, #10740b 100%)}.bankCard-popup{--background: var(--ion-background-light-color);--width: 88vw;--height: fit-content;--box-shadow: 0 28px 48px rgba(0, 0, 0, .4);--border-radius: 6px}.bankCard-popup .wrapper{margin:16px 8px;padding:0 12px;height:fit-content}.bankCard-popup .wrapper ion-img.btn-close{width:32px;height:32px;position:absolute;top:0;right:0}.bankCard-popup .wrapper .dialog-title{text-align:center;margin-bottom:8px}.bankCard-popup .wrapper .dialog-content{font-size:.9rem;color:#fff;padding:8px 4px;margin-bottom:8px}.bankCard-popup .wrapper .btn-group{display:flex;justify-content:space-between}.bankCard-popup .wrapper .btn-group ion-button{position:relative;color:#fff}.bankCard-popup .wrapper .btn-group ion-button.btn-confirm{--background: linear-gradient(90deg, #f78d22, #e34e04);--background-activated: linear-gradient(45deg, #f78d22, #e34e04)}.bankCard-popup .wrapper .btn-group ion-button.btn-cancel{--background: linear-gradient(0deg, #32b12f 0%, #10740b 100%);--background-activated: linear-gradient(30deg, #32b12f 0%, #10740b 100%)}.withdraw{background-color:var(--ion-background-color)}.withdraw .block-title{margin-bottom:12px}.withdraw .balance-card{position:relative;width:100%;height:10vh;margin:8px 0}.withdraw .balance-card ion-img,.withdraw .balance-card::part(image){position:absolute;height:100%;width:100%;object-fit:contain}.withdraw .balance-card .balance-content{position:relative;width:100%;height:100%;color:#000;display:flex;flex-direction:column;align-items:center;justify-content:center}.withdraw .balance-card .balance-amount{font-size:1.4rem;margin-top:12px}.withdraw .btn-change-account{height:100%;font-size:.8rem;font-weight:700;color:#fdea5a;text-decoration-line:underline}.withdraw .btn-add-account{--background: linear-gradient(90deg, #24ee89, #9fe871);--background-activated: linear-gradient(40deg, #24ee89, #9fe871);--color: #000000}.withdraw .bank-info{width:100%;height:52px;border-radius:14px;background:linear-gradient(90deg,#a33cf3,#d181ff);display:flex;align-items:center;padding:14px;margin-bottom:14px}.withdraw .amount-item{box-sizing:border-box;white-space:nowrap;width:100%;height:2.4rem;line-height:2rem;border-radius:20px;background-color:var(--ion-background-light-color);text-align:center;margin:8px 2px}.withdraw .amount-item.select{border:1px solid #00ff84}.withdraw .limit-item{margin:8px 0;padding:0;border-radius:10px}.withdraw .btn-withdraw{--background: linear-gradient(90deg, #24ee89, #9fe871);--background-activated: linear-gradient(40deg, #24ee89, #9fe871);--color: #000000;--box-shadow: 0 0 12px #23ee884d, 0 -2px #1dca6a inset;font-size:1.2rem;min-height:3rem}.withdraw-info{--height: auto}.withdraw-info .ion-delegate-host.ion-page{padding:8px 0;height:65vh}.withdraw-info ion-content{--keyboard-offset: 0 !important}.withdraw-info .account-number{font-weight:400;font-size:2rem;color:#ffdf3f;text-align:center}.withdraw-info .account-text{font-size:.8rem;color:#fa8484;text-align:center}.withdraw-info .block-title{font-size:1rem;margin:12px 0}.withdraw-info .detail-item{margin:8px 0;padding:0;border-radius:10px}.withdraw-info ion-list.password-info ion-item{--ion-item-background: transparent;margin-bottom:16px;margin-right:-16px}.withdraw-info ion-list.password-info ion-item::part(native){padding:0}.withdraw-info .btn-withdraw{--background: linear-gradient(90deg, #24ee89, #9fe871);--background-activated: linear-gradient(40deg, #24ee89, #9fe871);--color: #000000;--box-shadow: 0 0 12px #23ee884d, 0 -2px #1dca6a inset;font-size:1.2rem;min-height:3rem;margin:16px}\n",document.head.appendChild(a);const X={class:"wrapper"},Q={class:"dialog-title"},Z={class:"dialog-content"},tt={class:"btn-group"},at={__name:"SetPasswordPopup",setup(t,{expose:a}){const m=e(),{popupEnter:b,popupLeave:f}=h(),v=n(!1),x=()=>{v.value=!1,m.push({name:"WithdrawPassword"})};return a({showDialog:async()=>{v.value=!0}}),(t,a)=>(i(),o(c(g),{class:"setPassword-popup",isOpen:v.value,enterAnimation:c(b),leaveAnimation:c(f),onDidDismiss:a[1]||(a[1]=t=>v.value=!1)},{default:r((()=>[l("div",X,[l("h3",Q,d(t.$t("withdraw.setPasswordPopup.title")),1),l("div",Z,d(t.$t("withdraw.setPasswordPopup.des")),1),l("div",tt,[s(c(p),{class:"btn-cancel ion-text-capitalize",fill:"solid",shape:"round",onClick:a[0]||(a[0]=u((t=>v.value=!1),["stop"]))},{default:r((()=>[w(d(t.$t("withdraw.button.cancel")),1)])),_:1}),s(c(p),{class:"btn-confirm ion-text-capitalize",fill:"solid",shape:"round",onClick:u(x,["stop"])},{default:r((()=>[w(d(t.$t("withdraw.button.goToSetPassword")),1)])),_:1})])])])),_:1},8,["isOpen","enterAnimation","leaveAnimation"]))}},et={class:"wrapper"},nt={class:"dialog-title"},it={class:"dialog-content"},ot={class:"btn-group"},rt={__name:"BankCardPopup",setup(t,{expose:a}){const m=e(),{popupEnter:b,popupLeave:f}=h(),v=n(!1),x=()=>{v.value=!1,m.push({name:"BankCardList"})};return a({showDialog:async()=>{v.value=!0}}),(t,a)=>(i(),o(c(g),{class:"bankCard-popup",isOpen:v.value,enterAnimation:c(b),leaveAnimation:c(f),onDidDismiss:a[1]||(a[1]=t=>v.value=!1)},{default:r((()=>[l("div",et,[l("h3",nt,d(t.$t("withdraw.bankCardPopup.title")),1),l("div",it,d(t.$t("withdraw.bankCardPopup.des")),1),l("div",ot,[s(c(p),{class:"btn-cancel ion-text-capitalize",fill:"solid",shape:"round",onClick:a[0]||(a[0]=u((t=>v.value=!1),["stop"]))},{default:r((()=>[w(d(t.$t("withdraw.button.cancel")),1)])),_:1}),s(c(p),{class:"btn-confirm ion-text-capitalize",fill:"solid",shape:"round",onClick:u(x,["stop"])},{default:r((()=>[w(d(t.$t("withdraw.button.addNewAccount")),1)])),_:1})])])])),_:1},8,["isOpen","enterAnimation","leaveAnimation"]))}},lt={class:"balance-card"},dt={class:"balance-content"},st={class:"balance-title"},ct={class:"balance-amount"},pt={style:{margin:"4px 0"}},ut={class:"block-title ion-justify-content-between",style:{display:"flex"}},wt={key:1,class:"bank-info"},gt={style:{margin:"4px 0"}},ht={class:"block-title"},mt=l("hr",null,null,-1),bt={slot:"start",style:{color:"rgb(179, 190, 193)","font-size":"0.8rem"}},ft={slot:"end"},vt={slot:"start",style:{color:"rgb(179, 190, 193)","font-size":"0.8rem"}},xt={slot:"end"},kt={slot:"start",style:{color:"rgb(179, 190, 193)","font-size":"0.8rem"}},yt={slot:"end"},At={slot:"start",style:{color:"rgb(179, 190, 193)","font-size":"0.8rem"}},Pt={slot:"end"},Ct=l("hr",null,null,-1),_t={style:{margin:"4px 0"}},$t={class:"block-title"},Lt={style:{"font-size":"0.8rem"}},zt={style:{color:"#ffdf3f","margin-left":"4px"}},Nt={style:{color:"#ffdf3f","margin-left":"4px"}},Dt={class:"account-number"},St={class:"account-text"},Bt=l("br",null,null,-1),jt={slot:"start",style:{color:"rgb(179, 190, 193)","font-size":"0.8rem"}},It={slot:"end"},Wt={slot:"start",style:{color:"rgb(179, 190, 193)","font-size":"0.8rem"}},Vt={slot:"end"},Et={style:{"font-size":"0.8rem",color:"#fa8484"}},Ft={style:{color:"#ffdf3f",margin:"0 4px"}},Ot={style:{margin:"4px 0"}},Ut={class:"block-title"},qt={slot:"start",style:{color:"rgb(179, 190, 193)","font-size":"0.8rem"}},Ht={slot:"end"},Mt={class:"block-title"};t("default",{__name:"Withdraw",setup(t){const a=C(),{t:h}=m(),X=e(),Q=b();f();const{getPublicUrl:Z}=J(),tt=n(null),et=n(null),nt=n(!1),it=n(!1),ot=n([]),Jt=CURRENCY_SIGN,Kt=n(0),Rt=n(0),Yt=v({withdrawAmount:0,remainingWithdrawLimit:"",remainingWithdrawCount:"",withdrawLimit:"",vipDailyLimit:"",balance:"",withdrawAccount:{},withdrawAccounts:[]}),Gt=v({withdrawAmount:0,withdrawFee:0,arrivalAmount:0,bankAccount:"",serviceCharge:0,withdrawPassword:""});x((async()=>{Q.barLoading=!0;const t=await Y();if("00000"===t.code)if(Yt.withdrawAccounts=t.data,a.query.cardId){const t=Yt.withdrawAccounts.filter((t=>t.id==a.query.cardId));Yt.withdrawAccount=t.length>0?t[0]:Yt.withdrawAccounts[0]}else Yt.withdrawAccount=Yt.withdrawAccounts[0];else{const t=await k.create({message:bankData.msg,duration:1500,position:"top",color:"danger",translucent:!0});await t.present()}const e=await y();if("00000"===e.code)it.value=Boolean(e.data.withdrawPasswordValid),it.value||tt.value.showDialog();else{const t=await k.create({message:e.msg,duration:1500,position:"top",color:"danger",translucent:!0});await t.present()}const n=await G();if("00000"===n.code)Rt.value=Q.appConfig.maxWithdrawAmount,Kt.value=Q.appConfig.minWithdrawAmount,ot.value=[Kt.value],Yt.withdrawLimit=n.data.withdrawLimit,Yt.balance=n.data.balance,Yt.withdrawAmount=Kt.value;else{const t=await k.create({message:n.msg,duration:1500,position:"top",color:"danger",translucent:!0});await t.present()}Q.barLoading=!1}));const Tt=()=>{it.value?X.push({name:"BankCardList"}):tt.value.showDialog()},Xt=()=>{it.value?X.push({name:"BankCardList"}):tt.value.showDialog()},Qt=async()=>{if(it.value)if(0!=Yt.withdrawAccounts.length)if(Number(Yt.withdrawAmount)<=0){const t=await k.create({message:h("withdraw.toast.text3"),duration:1500,position:"top",color:"danger",translucent:!0});await t.present()}else if(Number(Yt.withdrawAmount)<Kt.value||Number(Yt.withdrawAmount)>Rt.value){const t=await k.create({message:`Min: ${Kt.value} Max: ${Rt.value}`,duration:1500,position:"top",color:"danger",translucent:!0});await t.present()}else Q.fullLoading=!0,Gt.arrivalAmount=Yt.withdrawAmount,Gt.bankAccount=Yt.withdrawAccount.cardNo,Gt.withdrawAmount=Yt.withdrawAmount,Gt.withdrawPassword="",nt.value=!0,Q.fullLoading=!1;else et.value.showDialog();else tt.value.showDialog()},Zt=async()=>{if(0==Gt.withdrawPassword.length){const t=await k.create({message:h("withdraw.toast.text1"),duration:1500,position:"top",color:"warning",translucent:!0});return void(await t.present())}Q.fullLoading=!0;const t=await T({amount:Number(Yt.withdrawAmount),id:Yt.withdrawAccount.id,memberBankId:Yt.withdrawAccount.bankId,memberBankCardNo:Q.encrypt.encrypt(Yt.withdrawAccount.cardNo),withdrawPassword:Q.encrypt.encrypt(Gt.withdrawPassword)});if("00000"===t.code){const t=await k.create({message:h("withdraw.toast.text2"),duration:1500,position:"top",color:"success",translucent:!0});await t.present(),nt.value=!1}else{const a=await k.create({message:t.msg,duration:1500,position:"top",color:"danger",translucent:!0});await a.present()}Q.fullLoading=!1};return(t,a)=>A((i(),o(c(M),{class:"withdraw"},{default:r((()=>[s(c(W),null,{default:r((()=>{var e;return[l("div",lt,[s(c(_),{src:c(Z)("/wallet/img-bg-balance.png")},null,8,["src"]),l("div",dt,[l("div",st,d(t.$t("withdraw.myBalance")),1),l("div",ct,d(c(Jt))+" "+d(null===(e=Yt.balance)||void 0===e?void 0:e.toLocaleString()),1)])]),l("div",pt,[l("div",ut,[l("span",null,d(t.$t("withdraw.bankAccount")),1),l("span",{class:"btn-change-account",onClick:u(Xt,["stop"])},d(t.$t("withdraw.changeBankAccount")),1)]),0==Yt.withdrawAccounts.length?(i(),o(c(p),{key:0,class:"btn-add-account",expand:"block",onClick:u(Tt,["stop"])},{default:r((()=>[s(c($),{slot:"start",icon:c(L)},null,8,["icon"]),l("span",null,d(t.$t("withdraw.addNewAccount")),1)])),_:1})):(i(),z("div",wt,"Acc No: "+d(Yt.withdrawAccount.cardNo),1))]),l("div",gt,[l("div",ht,[w(d(t.$t("withdraw.withdrawAmount"))+" ",1),l("span",null,"("+d(c(Jt))+" "+d(Kt.value)+" - "+d(Rt.value)+" )",1)]),s(c(N),{style:{margin:"8px 0"}},{default:r((()=>[(i(!0),z(S,null,D(ot.value,((t,a)=>(i(),o(c(K),{key:a,size:"3.8",class:R(["amount-item",{select:Number(t)==Number(Yt.withdrawAmount)}]),onClick:u((a=>{return e=t,void(Yt.withdrawAmount=Number(e));var e}),["stop"])},{default:r((()=>[l("div",null,d(c(Jt))+" "+d(null==t?void 0:t.toLocaleString()),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),s(c(B),{modelValue:Yt.withdrawAmount,"onUpdate:modelValue":a[0]||(a[0]=t=>Yt.withdrawAmount=t),label:c(Jt),type:"number",placeholder:t.$t("withdraw.withdrawAmount"),max:Rt.value,min:Kt.value,clearInput:!0},null,8,["modelValue","label","placeholder","max","min"])]),mt,s(c(j),null,{default:r((()=>[s(c(I),{class:"limit-item",lines:"none"},{default:r((()=>{var a;return[l("span",bt,d(t.$t("withdraw.items1"))+":",1),l("span",ft,d(c(Jt))+" "+d((null===(a=Yt.remainingWithdrawLimit)||void 0===a?void 0:a.toLocaleString())||"-"),1)]})),_:1}),s(c(I),{class:"limit-item",lines:"none"},{default:r((()=>{var a;return[l("span",vt,d(t.$t("withdraw.items2"))+":",1),l("span",xt,d(c(Jt))+" "+d((null===(a=Yt.vipDailyLimit)||void 0===a?void 0:a.toLocaleString())||"-"),1)]})),_:1}),s(c(I),{class:"limit-item",lines:"none"},{default:r((()=>{var a;return[l("span",kt,d(t.$t("withdraw.items3"))+":",1),l("span",yt,d(c(Jt))+" "+d((null===(a=Yt.withdrawLimit)||void 0===a?void 0:a.toLocaleString())||"-"),1)]})),_:1}),s(c(I),{class:"limit-item",lines:"none"},{default:r((()=>{var a;return[l("span",At,d(t.$t("withdraw.items4"))+":",1),l("span",Pt,d((null===(a=Yt.remainingWithdrawCount)||void 0===a?void 0:a.toLocaleString())||"-"),1)]})),_:1})])),_:1}),Ct,l("div",_t,[l("div",$t,d(t.$t("withdraw.tips.title"))+": ",1),l("span",Lt,[l("span",null,d(t.$t("withdraw.tips.tips1")),1),l("span",zt,d(t.$t("withdraw.tips.tips2")),1),l("span",null,d(t.$t("withdraw.tips.tips3")),1),l("span",Nt,d(t.$t("withdraw.tips.tips4")),1),w(". ")])]),A(s(c(p),{class:"btn-withdraw",expand:"block",shape:"round",onClick:u(Qt,["stop"])},{default:r((()=>[w(d(t.$t("withdraw.button.withdraw")),1)])),_:1},512),[[P,Yt.withdrawAmount]])]})),_:1}),s(at,{ref_key:"setPasswordPopup",ref:tt},null,512),s(rt,{ref_key:"bankCardPopup",ref:et},null,512),s(c(g),{class:"withdraw-info","is-open":nt.value,"initial-breakpoint":1,breakpoints:[0,1]},{default:r((()=>[s(c(V),null,{default:r((()=>[s(c(E),null,{default:r((()=>[s(c(F),null,{default:r((()=>[w(d(t.$t("withdraw.configPopup.title")),1)])),_:1}),s(c(O),{style:{position:"absolute",top:"0",right:"16px"}},{default:r((()=>[s(c(p),{onClick:a[1]||(a[1]=u((t=>nt.value=!1),["stop"]))},{default:r((()=>[s(c($),{slot:"icon-only",icon:c(U),color:"light"},null,8,["icon"])])),_:1})])),_:1})])),_:1})])),_:1}),s(c(W),{class:"ion-padding"},{default:r((()=>{var e;return[l("div",Dt,d(c(Jt))+" "+d(null===(e=Gt.arrivalAmount)||void 0===e?void 0:e.toLocaleString()),1),l("div",St,d(t.$t("withdraw.configPopup.arrivalAmount")),1),Bt,s(c(j),null,{default:r((()=>[s(c(I),{class:"detail-item",lines:"none"},{default:r((()=>{var a;return[l("span",jt,d(t.$t("withdraw.configPopup.title"))+":",1),l("span",It,d(c(Jt))+" "+d(null===(a=Gt.withdrawAmount)||void 0===a?void 0:a.toLocaleString()),1)]})),_:1}),s(c(I),{class:"detail-item",lines:"none"},{default:r((()=>{var a;return[l("span",Wt,d(t.$t("withdraw.configPopup.serviceCharge"))+":",1),l("span",Vt,d(c(Jt))+" "+d(null===(a=Gt.serviceCharge)||void 0===a?void 0:a.toLocaleString()),1)]})),_:1}),l("div",Et,[l("span",null,d(t.$t("withdraw.configPopup.des1")),1),l("span",Ft,d(Gt.withdrawFee)+"%",1),l("span",null,d(t.$t("withdraw.configPopup.des2")),1)]),l("div",Ot,[l("div",Ut,d(t.$t("withdraw.configPopup.chooseBankAccount")),1),s(c(I),{class:"detail-item",lines:"none"},{default:r((()=>[l("span",qt,d(t.$t("withdraw.configPopup.yourBankAccount"))+":",1),l("span",Ht,d(Gt.bankAccount),1)])),_:1})])])),_:1}),s(c(j),{class:"password-info",lines:"none",style:{margin:"4px 0"}},{default:r((()=>[l("div",Mt,d(t.$t("withdraw.configPopup.withdrawPassword")),1),s(c(I),null,{default:r((()=>[s(c(B),{modelValue:Gt.withdrawPassword,"onUpdate:modelValue":a[2]||(a[2]=t=>Gt.withdrawPassword=t),type:"password",fill:"outline",placeholder:t.$t("withdraw.configPopup.placeHolder")},{default:r((()=>[s(c($),{slot:"start",icon:c(q)},null,8,["icon"]),s(c(H),{slot:"end",color:"medium"})])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1}),s(c(p),{class:"btn-withdraw",expand:"block",shape:"round",onClick:u(Zt,["stop"])},{default:r((()=>[w(d(t.$t("withdraw.button.withdraw")),1)])),_:1})]})),_:1})])),_:1},8,["is-open"])])),_:1},512)),[[P,!c(Q).barLoading]])}})}}}));
