System.register(["./@vue-legacy-B1lBwRMN.js","./@ionic-legacy-CfoxM6Ox.js","./ionicons-legacy-gi9jGAtT.js","./index-legacy-32QwbpAN.js","./pinia-legacy-B2ukCLEo.js","./common-legacy-C9kPjphI.js","./NoData-legacy-C8dxULEW.js","./@ionic_components_1-legacy-C2GjtunC.js","./@stencil-legacy-Dkr4NQJU.js","./@ionic_components_2-legacy-DV709hm9.js","./@capacitor-legacy-0yG8iurR.js","./vue-router-legacy-8x9mO75R.js","./localforage-legacy-D0pVUvDl.js","./@adjustcom-legacy-QP0zxLxB.js","./jsencrypt-legacy-DGJHbPQ6.js","./vue-i18n-legacy-C4VmqYOX.js","./@intlify-legacy-DDHA1rkh.js","./pinia-plugin-persistedstate-2-legacy-CtlOhiZd.js","./@awesome-cordova-plugins-legacy-Bb45XN-u.js","./rxjs-legacy-CA8OYncU.js","./tslib-legacy-BRpw1qYg.js"],(function(e,a){"use strict";var l,i,n,s,o,c,u,r,d,m,g,p,h,y,f,v,w,b,j,_,L,k,x,z,C,M,D,T,S,I,U,E,P,H,V,A,G;return{setters:[e=>{l=e.r,i=e.c,n=e.I,s=e.J,o=e.G,c=e.K,u=e.b,r=e.L,d=e.D,m=e.R,g=e.S,p=e.U,h=e.F,y=e.Y,f=e.M,v=e.P,w=e.Z,b=e.Q},e=>{j=e.o,_=e.w,L=e.x,k=e.y,x=e.v,z=e.p,C=e.z,M=e.r,D=e.h,T=e.i,S=e.l,I=e.k},e=>{U=e.g,E=e.h},e=>{P=e.d,H=e.u},e=>{V=e.d},e=>{A=e.u},e=>{G=e._},null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".mail{background-color:var(--ion-background-color)}.mail ion-segment.ios{background-color:#323738;border-radius:12px}.mail .mail-item{position:relative;height:fit-content;margin-bottom:12px;border-radius:8px}.mail .mail-item .mail-content{position:relative;width:100%;height:fit-content;padding:12px 8px}.mail .mail-item .mail-content .mail-detail{color:#b3bec1;margin:8px 2px;text-align:justify;white-space:pre;overflow:hidden;max-height:4rem}.mail .mail-item .mail-content .mail-detail.show-all{max-height:fit-content}.mail .no-data{position:relative;top:10vh}.mail .btn-show-all{margin-left:auto}.mail .btn-show-all::part(native){padding:0}.mail .btn-view-more{--background: #464f50;--background-activated: #464f50;--border-radius: 8px;--color: rgb(36, 238, 137)}.mail .btn-del{font-size:1.4rem}\n",document.head.appendChild(a);const N=V("mail",(()=>{const e=l([]),a=l([]),t=i((()=>e.value.some((e=>!e.readStatus))));return{mailList:e,hasUnread:t,getMailList:async()=>{const a=await P({url:"/app/member/h5/siteMsg",method:"GET",params:t});var t;"00000"===a.code&&(e.value=a.data.list||[],e.value.forEach((e=>e.showDetail=!1)))},announceList:a,getAnnounceList:async()=>{const e=await P({url:"/app/member/h5/announce",method:"GET",params:t});var t;"00000"===e.code&&(a.value=e.data.list||[],a.value.forEach((e=>e.showDetail=!1)))}}}),{persistedState:{persist:!1}}),R={style:{"font-size":"0.8rem"}},F={style:{"font-size":"1rem","font-weight":"800"}},J=["innerHTML"],K={style:{"font-size":"0.8rem"}},O={style:{"font-size":"1rem","font-weight":"800"}},Q=["innerHTML"];e("default",{__name:"Mail",setup(e){const a=H(),i=N(),{getPublicUrl:V}=A(),Y=l("system"),Z={system:"mailList",activities:"announceList"};j((async()=>{a.barLoading=!0,await i.getMailList(),a.barLoading=!1}));const $=async()=>{"system"==Y.value&&await i.getMailList(),"activities"==Y.value&&await i.getAnnounceList()},q=async e=>{var a;e.showDetail=!e.showDetail,e.readStatus||("system"==Y.value&&(a=[{id:e.detailId}],P({url:"/app/member/h5/siteMsg/read",method:"PUT",data:a})),"activities"==Y.value&&function(e){P({url:"/app/member/h5/announce/read",method:"POST",data:e})}([{id:e.mainId}]))},B=async e=>{a.barLoading=!0;const l=await function(e){return P({url:"/app/member/h5/siteMsg/del",method:"PUT",data:e})}({mailId:e.detailId});if("00000"===l.code){await i.getMailList(),a.barLoading=!1;const e=await toastController.create({message:t("mail.message.deleteSuccess"),duration:1500,position:"top",color:"success",translucent:!0});await e.present()}else{const e=await toastController.create({message:l.msg||l.code,duration:1500,position:"top",color:"danger",translucent:!0});await e.present(),a.barLoading=!1}};return(e,t)=>(c(),n(o(z),{class:"mail"},{default:s((()=>[u(d(o(x),null,{default:s((()=>[d(o(_),{modelValue:Y.value,"onUpdate:modelValue":t[0]||(t[0]=e=>Y.value=e),mode:"ios",onIonChange:$},{default:s((()=>[d(o(L),{value:"system"},{default:s((()=>[m("System Notices")])),_:1}),d(o(L),{value:"activities"},{default:s((()=>[m("Activities")])),_:1})])),_:1},8,["modelValue"]),o(a).barLoading||0==o(i)[Z[Y.value]].length?(c(),n(G,{key:0,class:"no-data",desc:e.$t("mail.message.nodata")},null,8,["desc"])):(c(),n(o(k),{key:1,style:{"margin-top":"16px"}},{default:s((()=>["system"==Y.value?(c(!0),g(h,{key:0},p(o(i).mailList,(e=>(c(),n(o(C),{key:e.detailId,class:"mail-item",lines:"none"},{default:s((()=>[d(o(M),{class:"mail-content"},{default:s((()=>[f("div",R,v(e.gmtCreate||""),1),f("h4",F,v(e.msgTitle||""),1),f("div",{class:w(["mail-detail",{"show-all":e.showDetail}]),innerHTML:e.msgContent},null,10,J),d(o(D),{class:"ion-justify-content-end"},{default:s((()=>[d(o(T),{size:"auto"},{default:s((()=>[d(o(S),{class:"btn-show-all",color:"light",fill:"clear",size:"small",onClick:b((a=>q(e)),["stop"])},{default:s((()=>[f("span",null,v(e.showDetail?"hide":"Show all"),1),d(o(I),{icon:e.showDetail?o(U):o(E),style:{"margin-left":"4px"}},null,8,["icon"])])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024),d(o(D),{class:"ion-align-items-center ion-justify-content-between"},{default:s((()=>[d(o(T),{size:"auto"},{default:s((()=>[y("",!0)])),_:1}),d(o(T),{size:"auto"},{default:s((()=>[d(o(I),{class:"btn-del",src:o(V)("/icon_userInfo/icon-delete.svg"),onClick:b((a=>B(e)),["stop"])},null,8,["src","onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)):y("",!0),"activities"==Y.value?(c(!0),g(h,{key:1},p(o(i).announceList,(e=>(c(),n(o(C),{key:e.mainId,class:"mail-item",lines:"none"},{default:s((()=>[d(o(M),{class:"mail-content"},{default:s((()=>[f("div",K,v(e.startTime||""),1),f("h4",O,v(e.title||""),1),f("div",{class:w(["mail-detail",{"show-all":e.showDetail}]),innerHTML:e.content},null,10,Q),d(o(D),{class:"ion-justify-content-end"},{default:s((()=>[d(o(T),{size:"auto"},{default:s((()=>[d(o(S),{class:"btn-show-all",color:"light",fill:"clear",size:"small",onClick:b((a=>q(e)),["stop"])},{default:s((()=>[f("span",null,v(e.showDetail?"hide":"Show all"),1),d(o(I),{icon:e.showDetail?o(U):o(E),style:{"margin-left":"4px"}},null,8,["icon"])])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024),d(o(D),{class:"ion-align-items-center ion-justify-content-between"},{default:s((()=>[d(o(T),{size:"auto"},{default:s((()=>[y("",!0)])),_:1}),d(o(T),{size:"auto"})])),_:1})])),_:2},1024)])),_:2},1024)))),128)):y("",!0)])),_:1}))])),_:1},512),[[r,!o(a).barLoading]])])),_:1}))}})}}}));
