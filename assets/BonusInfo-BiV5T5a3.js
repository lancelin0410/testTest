import{r as y,c as R,I as f,J as a,G as e,K as r,D as s,R as h,S as g,U as z,F as N,M as p,P as u,Q as P,O as T}from"./@vue-3Wdfxk3_.js";import{o as F,w as G,x as L,k as w,r as b,y as E,v as j,p as A,z as D,h as O,i as U,j as M,l as $,t as q}from"./@ionic-ChxHNRcu.js";import{d as k,u as J,a as K,r as Q}from"./index-BtfuBToB.js";import{u as W}from"./common-icPcROaw.js";import{_ as H}from"./NoData-DOLhCyWu.js";import"./@ionic_components_1-CAQXnsIn.js";import"./@stencil-C-gE1UvY.js";import"./@ionic_components_2-DUGZJZYA.js";import"./@capacitor-CHoHO2YB.js";import"./vue-router-CvOicv45.js";import"./ionicons-DCtDYcIg.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./pinia-i8UTD9O9.js";import"./jsencrypt-Ve0Y4aUG.js";import"./vue-i18n-BmGSZPWT.js";import"./@intlify-BAcCFw_v.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";function X(d){return k({url:"/app/member/h5/gift/level/up",method:"GET",params:d})}function Y(d){return k({url:"/app/member/h5/gift/level/up",method:"POST",data:d})}const Z=p("div",{class:"bonus-title"},"Level up rewards",-1),ee={class:"bonus-desc"},te={class:"bonus-exp"},ae={class:"bonus-gift"},se={key:0},le={key:1,style:{color:"#ffdf3f"}},xe={__name:"BonusInfo",setup(d){const n=J(),c=K(),{getPublicUrl:v}=W(),x="â‚¹",_=y("vip"),i=y([]),S=R(()=>{let l=0;const o=i.value.filter((t,m)=>(t.state!=2&&(l=m),t.state!=2));return o.length==0?i.value[0]?[i.value[0]]:[]:l+1>=i.value.length?o:[...o,i.value[l+1]]});F(async()=>{c.isLogin?(n.fullLoading=!0,await c.getUserTotalInfo(),await I(),n.fullLoading=!1):ionRouter.navigate("/","back","replace",headerAnimation)});const I=async()=>{n.fullLoading=!0;const l=await X();l.code==="00000"&&(i.value=l.data||[],i.value.forEach(o=>{const t=c.vipInfo.filter(m=>m.id==o.vipId);t.length>0&&(o=Object.assign(o,t[0]))})),n.fullLoading=!1},C=async()=>{await I()},V=async l=>{n.fullLoading=!0,(await Y({vipId:l})).code==="00000"&&(B(),await(await q.create({message:"Claim success",duration:1500,position:"top",color:"success",translucent:!0})).present(),await I()),n.fullLoading=!1},B=async()=>{n.fullLoading=!0;const l=await Q();l.code==="00000"&&(c.userInfo.balance=Number(l.data)),n.fullLoading=!1};return(l,o)=>(r(),f(e(A),{class:"bonus"},{default:a(()=>[s(e(j),null,{default:a(()=>[s(e(G),{modelValue:_.value,"onUpdate:modelValue":o[0]||(o[0]=t=>_.value=t),mode:"md",onIonChange:C},{default:a(()=>[s(e(L),{class:"ion-text-capitalize",layout:"icon-start",value:"vip"},{default:a(()=>[s(e(w),{src:e(v)("/bonus/icon_vip.svg"),style:{height:"18px"}},null,8,["src"]),s(e(b),null,{default:a(()=>[h("VIP")]),_:1})]),_:1}),s(e(L),{class:"ion-text-capitalize",layout:"icon-start",value:"general"},{default:a(()=>[s(e(w),{src:e(v)("/bonus/icon_general.svg"),style:{height:"18px"}},null,8,["src"]),s(e(b),null,{default:a(()=>[h("General")]),_:1})]),_:1})]),_:1},8,["modelValue"]),_.value=="general"?(r(),f(H,{key:0,class:"no-data",desc:"Coming Soon"})):(r(),f(e(E),{key:1,style:{"margin-top":"16px"}},{default:a(()=>[(r(!0),g(N,null,z(S.value,t=>(r(),f(e(D),{key:t.vipId,class:"bonus-item",lines:"none"},{default:a(()=>[s(e(b),{class:"bonus-content"},{default:a(()=>[s(e(O),{class:"ion-justify-content-between"},{default:a(()=>[s(e(U),{size:"4"},{default:a(()=>[s(e(M),{src:e(v)("/bonus/levelup.png")},null,8,["src"])]),_:1}),s(e(U),{size:"8"},{default:a(()=>[Z,p("div",ee,[h("to "+u(t.vipName||"VIP1")+": ",1),p("span",te,u(t.levelUpRecharge>=e(c).currRecharge?e(c).currRecharge:t.levelUpRecharge),1),p("span",null," / "+u(t.levelUpRecharge),1)]),p("div",ae,u(e(x))+" "+u(t.levelUpGift),1),s(e($),{class:"btn-claim ion-text-capitalize",disabled:t.state!=0,onClick:P(m=>V(t.vipId),["stop"])},{default:a(()=>[t.state==2?(r(),g("span",se,"Not yet eligible")):t.state==1?(r(),g("span",le,"Claimed")):(r(),g("span",{key:2,style:T(t.state==0?"color: var(--ion-tab-bar-color-selected)":"")},"Claim",4))]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1}))}};export{xe as default};
