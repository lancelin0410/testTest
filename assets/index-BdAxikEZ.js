import{aS as x,q as N,ax as D,aX as E,aK as d,s as S,bH as i,I as u,v as m,bJ as H,bz as $,b9 as g,t as V,u as y,at as b,H as O,F as w,aV as j,r as F}from"./@vue-Dkad1Scs.js";import{V as K,a as L,b as M,c as R,d as W,e as G,f as X,g as Y,h as Q,i as Z,j as ee}from"./vuetify-Bz6dI_0v.js";/* empty css             */import{V as te}from"./vue3-beautiful-chat-DLJUIo1Z.js";import"./vue-BghDAyl9.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const v of l.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&c(v)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();async function k({url:r,method:s,data:n}){console.log(r);const c="https://www.teenteen123.com",o=101,l=new AbortController;setTimeout(()=>l.abort(),3e4);const v={appId:o,languageType:"EN",sign:"9310a4024d28e726",uid:"e15f5aadb3c3470ebda51c53486f40e1"};let T;return await fetch(`${c}${r}`,{method:s,body:JSON.stringify({...v,...n}),headers:{"Content-Type":"application/json"},signal:l.signal}).then(f=>f.json()).catch(f=>console.error("Error:",f)).then(f=>{f.state=="200"?T=f.resultData:console.error("Error:",f.msg)}),T}function ae(r){return k({url:"/customer/index",method:"POST",data:r})}function oe(r){return k({url:"/customer/get",method:"POST",data:r})}function se(r){return k({url:"/customer/success",method:"POST",data:r})}function le(r){return k({url:"/customer/fail",method:"POST",data:r})}const ne={class:"customer-info"},re=["innerHTML"],ie="https://storage.googleapis.com/baowang-admin",ue={__name:"App",setup(r){const s=x([]),n=x([]),c=x({}),o=x(!0),l=x(!1),v=x(!1),T={header:{bg:"#ffffff",text:"#4e8cff"},launcher:{bg:"#4e8cff"},messageList:{bg:"#eaeaea"},sentMessage:{bg:"#4e8cff",text:"#ffffff"},receivedMessage:{bg:"#ffffff",text:"#222222"},userInput:{bg:"#f4f7f9",text:"#565867"}},f=N(()=>n.value.filter(t=>!t.isRead.length).length),B=N(()=>l.value?String(s.value[0].id):""),_=(t=!1)=>{t&&(n.value=[]),ae().then(e=>{s.value=[e.customerAccount].map(C=>(C.imageUrl=ie+C.imageUrl,C)),console.log(JSON.parse(e.data)),n.value.push({id:0,author:s.value[0].id,type:"text",isRead:o.value,data:{type:e.type,solveType:e.solveType,text:e.reply||"Hello Sir is there any thing I can help you with?",list:JSON.parse(e.data)}}),l.value=!1}).catch(e=>console.log(e))};D(()=>_(!0));const I=t=>new Promise(e=>setTimeout(e,t)),P=async t=>{switch(t.display&&t.display.length>0&&p({author:"me",type:"text",isRead:!1,data:{text:t.display}}),t.type){case-1:p({author:s.value[0].id,type:"text",isRead:o.value,data:{type:t.type,solveType:t.solveType,text:"Please click the button below to contact Senior Customer Service",btnText:"Senior Customer Service",link:t.link}});break;case 0:_();break;case 1:p({author:s.value[0].id,type:"text",isRead:o.value,data:{type:t.type,solveType:t.solveType,text:t.text}});break;default:oe({questionId:t.id}).then(e=>{console.log(e),!e||!e.data&&!e.reply?p({author:s.value[0].id,type:"text",isRead:o.value,data:{type:0,solveType:0,text:"No record Data"}}):(console.log(JSON.parse(e.data||"[]")),console.log(JSON.parse(e.solveConfig||"[]")),[1,2].includes(e.solveType)&&e.solveConfig&&(c.value=JSON.parse(e.solveConfig)),p({author:s.value[0].id,type:"text",isRead:o.value,data:{type:e.type,solveType:e.solveType,text:e.reply||"",list:JSON.parse(e.data||"[]")}}))}).catch(e=>console.log(e));break}},p=async t=>{if(t.author=="me"){n.value.push(t),await I(Math.random()*2*100);const e=n.value.indexOf(t);n.value[e].isRead=!0,l.value=!0}t.author==s.value[0].id&&(await I(Math.random()*2*400),n.value.push(t),l.value=!1)},A=t=>{p({author:"me",type:"text",isRead:!1,data:{text:"Solve issue"}}),se({questionId:t.id}).then(e=>{console.log(e),p({author:s.value[0].id,type:"text",isRead:o.value,data:{text:c.value.solve_reply}})})},J=t=>{p({author:"me",type:"text",isRead:!1,data:{text:"Unsolve issue"}}),le({questionId:t.id}).then(e=>{console.log(e),p({author:s.value[0].id,type:"text",isRead:o.value,data:{type:2,solveType:t.solve_Type,text:c.value.unsolve_reply,list:[{type:0,display:c.value.unsolve_select_text},{type:-1,display:c.value.unsolve_customer_text,link:c.value.customer_link}]}})})},U=()=>{o.value=!0,n.value.forEach((t,e)=>{t.isRead=!0,e==n.value.length-1&&t.id!=0&&_()})},q=()=>{o.value=!1};return(t,e)=>{const C=E("beautiful-chat");return d(),S(Z,null,{default:i(()=>[u(Q,null,{default:i(()=>[u(C,{participants:s.value,onMessageWasSent:p,messageList:n.value,newMessagesCount:f.value||0,isOpen:o.value,open:U,close:q,showHeader:!0,showLauncher:!0,showTypingIndicator:B.value,showCloseButton:!1,colors:T,alwaysScrollToBottom:!0,disableUserListToggle:!0},{header:i(()=>{var a;return[e[1]||(e[1]=m("div",{class:"header-text"},"Customer Service Center",-1)),m("div",ne,[u(K,{size:"large",color:"surface-light"},{default:i(()=>{var h;return[u(L,{src:(h=s.value[0])==null?void 0:h.imageUrl},{error:i(()=>[u(M,{icon:"mdi-face-agent",size:"large",style:{height:"100%"}})]),_:1},8,["src"])]}),_:1}),H(m("span",null,g((a=s.value[0])==null?void 0:a.name)+" is serving",513),[[$,s.value[0]]])]),V("",!0)]}),"text-message-body":i(({message:a})=>[a.data.type==-1?(d(),y(w,{key:0},[m("div",{class:b(["msg_text",{unread:!a.isRead}])},g(a.data.text),3),u(R,{class:"btn-cs","prepend-icon":"mdi-information",color:"primary",density:"compact",flat:"",block:"",href:a.data.link,target:"_blank"},{default:i(()=>[O(g(a.data.btnText),1)]),_:2},1032,["href"])],64)):a.data.type==1?(d(),y("div",{key:1,class:b({unread:!a.isRead}),innerHTML:a.data.text},null,10,re)):a.data.type==2?(d(),y(w,{key:2},[m("div",{class:b(["msg_text",{unread:!a.isRead}])},g(a.data.text),3),u(W,{density:"compact",lines:"one"},{default:i(()=>[(d(!0),y(w,null,j(a.data.list,(h,z)=>(d(),S(G,{key:z,title:h.display,"min-height":"1rem",onClick:pe=>P(h)},null,8,["title","onClick"]))),128))]),_:2},1024)],64)):a.data.type==3?(d(),y("div",{key:3,class:b(["msg_text",{unread:!a.isRead}])},g(a.data.text||"充值列表"),3)):a.data.type==4?(d(),y("div",{key:4,class:b(["msg_text",{unread:!a.isRead}])},g(a.data.text||"提現列表"),3)):(d(),y("span",{key:5,class:b({unread:!a.isRead})},g(a.data.text),3)),[1,2].includes(a.data.solveType)?(d(),y(w,{key:6},[e[4]||(e[4]=m("div",{style:{"text-align":"center",color:"#4e8cff"}},"Is the issue resolve?",-1)),u(X,{density:"compact",flat:""},{default:i(()=>[u(R,{class:"btn-solve",color:"primary","prepend-icon":"mdi-thumb-up",onClick:h=>A(a.data)},{default:i(()=>e[2]||(e[2]=[O("Yes")])),_:2},1032,["onClick"]),u(R,{class:"btn-unsolve",variant:"tonal","prepend-icon":"mdi-thumb-down",onClick:h=>J(a.data)},{default:i(()=>e[3]||(e[3]=[O("No")])),_:2},1032,["onClick"])]),_:2},1024)],64)):V("",!0),a.author=="me"&&a.isRead?(d(),S(M,{key:7,icon:"mdi-check-all",color:"green-lighten-4",size:"x-small",style:{float:"right",margin:"0 -4px 0 8px",bottom:"-4px"}})):V("",!0)]),_:1},8,["participants","messageList","newMessagesCount","isOpen","showTypingIndicator"]),u(Y,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=a=>v.value=a),height:"100%",width:"100%"},{default:i(()=>[m("template",null,[u(L,{"aspect-ratio":1,class:"bg-white",src:"https://cdn.vuetifyjs.com/images/parallax/material.jpg",width:"100%"})])]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},ce=ee(),de=F(ue);de.use(ce).use(te).mount("#app");
