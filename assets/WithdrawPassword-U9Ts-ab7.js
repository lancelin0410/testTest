import{u as _}from"./vue-i18n-Drh5Jv-N.js";import{O as v,n as C,e as m,R as h,K as P,P as O,g as R,l as S,u as L,t as c}from"./@ionic-LOXDGMDQ.js";import{p as x}from"./ionicons-BuhCiVJn.js";import{c as B,u as $,n as N,d as U}from"./index-DXSjpOoF.js";import{f as W,h as D}from"./withdraw-C5Z78pxL.js";import"./@capacitor-CHoHO2YB.js";import{j as E,r as f,H as p,I as g,J as d,E as a,P as M,L as n,M as b,C as r,S as y,O as T}from"./@vue-FF6Ppp8k.js";import"./@intlify-BAcCFw_v.js";import"./@ionic_components_1-CfuvXJ2N.js";import"./@stencil-pJInS8Bp.js";import"./@ionic_components_2-BmE8Yi_w.js";import"./vue-router-BCw8xDr3.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./pinia-BYTB-Pq_.js";import"./jsencrypt-Ve0Y4aUG.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";const j={key:0,style:{margin:"4px 0"}},A={class:"block-title"},F={style:{margin:"4px 0"}},H={class:"block-title"},J={style:{margin:"4px 0"}},K={class:"block-title"},ma={__name:"WithdrawPassword",setup(q){const{t:w}=_(),k=L(),o=B(),I=$(),{getImgUrl:u}=U(),t=E({withdrawPasswdOri:"",withdrawPasswd:"",withdrawPasswdRepeat:"",mobile:I.userInfo.mobile||"",verificationCode:"",canModifyPwd:!I.userInfo.mobile});Number(o.appConfig.callPrefixes),f(0),f(w("account.button.otp"));const l=f(!1);v(async()=>{o.barLoading=!0;const s=await N();s.code==="00000"&&(l.value=!!s.data.withdrawPasswordValid),o.barLoading=!1});const V=async()=>{if(l.value&&(!t.withdrawPasswdOri||t.withdrawPasswdOri.length==0)){await(await c.create({message:w("account.withdrawalPassword.toast.withdrawPasswdOri"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}if(!t.withdrawPasswd||t.withdrawPasswd.length==0){await(await c.create({message:w("account.withdrawalPassword.toast.withdrawPasswd"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}if(t.withdrawPasswd!==t.withdrawPasswdRepeat){await(await c.create({message:w("account.withdrawalPassword.toast.withdrawPasswdRepeat"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}o.fullLoading=!0;let s;l.value?s=await W({oldPassword:o.encrypt.encrypt(t.withdrawPasswdOri),password:o.encrypt.encrypt(t.withdrawPasswd),confirmPassword:o.encrypt.encrypt(t.withdrawPasswdRepeat)}):s=await D({password:o.encrypt.encrypt(t.withdrawPasswd),confirmPassword:o.encrypt.encrypt(t.withdrawPasswdRepeat)}),s.code==="00000"&&(await(await c.create({message:"Success",duration:1500,position:"top",translucent:!0,icon:x,color:"success"})).present(),setTimeout(()=>k.back(),1e3)),o.fullLoading=!1};return(s,e)=>(p(),g(a(S),{class:"withdraw-password"},{default:d(()=>[a(o).barLoading?y("",!0):(p(),g(a(C),{key:0},{default:d(()=>[l.value?(p(),M("div",j,[n("div",A,b(s.$t("account.withdrawalPassword.label.originalPassword")),1),r(a(P),{modelValue:t.withdrawPasswdOri,"onUpdate:modelValue":e[0]||(e[0]=i=>t.withdrawPasswdOri=i),type:"password",placeholder:s.$t("account.withdrawalPassword.label.originalPassword")},{default:d(()=>[r(a(m),{class:"input-prefix",slot:"start",src:a(u)("/account/w-password.png")},null,8,["src"]),r(a(h),{slot:"end",color:"medium"})]),_:1},8,["modelValue","placeholder"])])):y("",!0),n("div",F,[n("div",H,b(s.$t("account.withdrawalPassword.label.password")),1),r(a(P),{modelValue:t.withdrawPasswd,"onUpdate:modelValue":e[1]||(e[1]=i=>t.withdrawPasswd=i),type:"password",placeholder:s.$t("account.withdrawalPassword.label.password")},{default:d(()=>[r(a(m),{class:"input-prefix",slot:"start",src:a(u)("/account/w-password.png")},null,8,["src"]),r(a(h),{slot:"end",color:"medium"})]),_:1},8,["modelValue","placeholder"])]),n("div",J,[n("div",K,b(s.$t("account.withdrawalPassword.label.repeatPassword")),1),r(a(P),{modelValue:t.withdrawPasswdRepeat,"onUpdate:modelValue":e[2]||(e[2]=i=>t.withdrawPasswdRepeat=i),type:"password",placeholder:s.$t("account.withdrawalPassword.label.repeatPassword")},{default:d(()=>[r(a(m),{class:"input-prefix",slot:"start",src:a(u)("/account/w-password.png")},null,8,["src"]),r(a(h),{slot:"end",color:"medium"})]),_:1},8,["modelValue","placeholder"])])]),_:1})),a(o).barLoading?y("",!0):(p(),g(a(O),{key:1},{default:d(()=>[r(a(R),{class:"btn-confirm",expand:"block",shape:"round",onClick:V},{default:d(()=>[T("Confirm")]),_:1})]),_:1}))]),_:1}))}};export{ma as default};
