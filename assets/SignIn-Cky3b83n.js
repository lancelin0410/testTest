import{j as y,r as I,w as L,I as x,J as o,E as t,H as B,C as a,L as m,M as p,O as i,N as S}from"./@vue-B0j_qcai.js";import{u as U}from"./vue-i18n-DzMZFiEd.js";import{u as $,e as O,E,D as _,N as v,g as d,o as M,k as T,t as b}from"./@ionic-18nICBu3.js";import{u as A,h as D,b as F,i as G}from"./index-CBAZMc4h.js";import"./@intlify-BAcCFw_v.js";import"./@stencil-DBaMOtEh.js";import"./@capacitor-CHoHO2YB.js";import"./vue-router-BLYQmdkJ.js";import"./ionicons-CdrslGsx.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./pinia-Ds326xZN.js";import"./jsencrypt-Ve0Y4aUG.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";const R={style:{"font-weight":"1000"}},j={slot:"start"},q=m("span",{slot:"start"},"OTP",-1),H={class:"note"},ct={__name:"SignIn",setup(J){const{t:l}=U(),C=$(),u=A(),f=D(),{getPublicUrl:P}=F(),e=y({device:"h5",mobile:"",sessionId:"",code:""});let w;const h=Number(u.appConfig.callPrefixes),c=I(l("account.button.otp")),n=I(0),N=async()=>{if(n.value==0){if(!e.mobile||e.mobile.length==0){await(await b.create({message:l("account.resister.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}const s=await G({mobile:u.encrypt.encrypt(e.mobile),callPrefixes:h});s.code==="00000"&&(e.sessionId=s.data.sessionId,n.value=60,V())}},V=()=>{c.value="".concat(n.value,"s"),w=setInterval(()=>{n.value>0?(n.value--,c.value="".concat(n.value,"s")):(c.value=l("account.button.otp"),n.value=0,clearInterval(w))},1e3)},k=async()=>{if(!e.mobile||e.mobile.length==0){await(await b.create({message:l("account.resister.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}if(!e.code||e.code.length==0){await(await b.create({message:l("account.resister.toast.verificationCode"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}u.fullLoading=!0,await f.mobileLogin(e),u.fullLoading=!1};return L(()=>f.isLogin,()=>{f.isLogin&&C.replace("/")}),(s,r)=>(B(),x(t(T),{class:"sign-in"},{default:o(()=>[a(t(O),{src:t(P)("/banner.webp")},null,8,["src"]),a(t(M),null,{default:o(()=>[a(t(E),{lines:"none"},{default:o(()=>[m("h5",R,p(s.$t("login.header.signIn")),1),a(t(_),null,{default:o(()=>[a(t(v),{modelValue:e.mobile,"onUpdate:modelValue":r[0]||(r[0]=g=>e.mobile=g),fill:"outline",placeholder:"Phone Number"},{default:o(()=>[m("span",j,"+"+p(t(h)),1)]),_:1},8,["modelValue"])]),_:1}),a(t(_),null,{default:o(()=>[a(t(v),{modelValue:e.code,"onUpdate:modelValue":r[1]||(r[1]=g=>e.code=g),placeholder:s.$t("account.withdrawalPassword.label.otpPlaceholder")},{default:o(()=>[q,a(t(d),{slot:"end",class:"btn-otp",color:"medium",style:{color:"#00ff84"},onClick:N},{default:o(()=>[i(p(c.value),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1}),a(t(d),{class:"btn-forget",fill:"clear","router-link":"/login/forgetPW"},{default:o(()=>[i("Forget your password?")]),_:1}),a(t(d),{class:"btn-sign-in",expand:"block",onClick:S(k,["stop"])},{default:o(()=>[i(p(s.$t("login.header.signIn")),1)]),_:1}),m("div",H,[i(" New to BC.GAME? "),a(t(d),{class:"btn-sing-up",fill:"clear","router-link":"/login/signUp"},{default:o(()=>[i("Create account")]),_:1})])]),_:1})]),_:1}))}};export{ct as default};
