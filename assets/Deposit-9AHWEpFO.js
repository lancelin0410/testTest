import{c as $,d as A,e as y,M as N,g as z,K as H,n as G,P as J,t as S,O as K,H as W,a as q,l as Q,J as X}from"./@ionic-LOXDGMDQ.js";import{r as R,j as Z,w as Y,H as l,P as v,a as O,U,E as t,C as d,J as n,F as C,Q as L,I as r,N as x,L as s,R as M,S as h,M as i,O as k,Z as ee,W as te,X as oe}from"./@vue-FF6Ppp8k.js";import{u as ne}from"./vue-i18n-Drh5Jv-N.js";import{s as se}from"./pinia-BYTB-Pq_.js";import{c as B,a as ae}from"./index-DXSjpOoF.js";import{u as D,r as le}from"./useDepositStore-BRYoBr3x.js";import"./@ionic_components_1-CfuvXJ2N.js";import"./@stencil-pJInS8Bp.js";import"./@ionic_components_2-BmE8Yi_w.js";import"./@capacitor-CHoHO2YB.js";import"./vue-router-BCw8xDr3.js";import"./ionicons-BuhCiVJn.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./@intlify-BAcCFw_v.js";import"./jsencrypt-Ve0Y4aUG.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";const ie={class:"method-bg"},de={class:"method-text"},re={class:"method-fg"},ue=s("hr",null,null,-1),ce={class:"method-bg"},me={class:"channel-text"},pe={class:"method-fg"},he=s("hr",null,null,-1),ge={style:{margin:"4px 0"}},fe={class:"block-title"},_e={class:"ion-margin-start",style:{"font-size":"0.9rem"}},ye={class:"ion-margin-start",style:{"font-size":"0.9rem"}},Ie=s("hr",null,null,-1),be={style:{margin:"4px 0"}},ve={class:"block-title"},Ce={style:{"font-size":"0.8rem"}},ke={__name:"OnlinePayment",setup(T){const{t:w}=ne(),c=B(),m=D(),{isTypeB:P}=se(m),{getPublicUrl:g}=ae(),f="â‚¹",u=R(0),p=R(0),e=Z({depositAmount:0,depositMethodItem:{},depositMethod:"",depositChannelItem:{},depositChannel:1,depositMethodList:[]});Y(()=>m.onlinePaymentInfo,()=>{c.barLoading=!0,e.depositMethodItem=m.onlinePaymentInfo[0],e.depositMethod=m.onlinePaymentInfo[0].id,e.depositChannelItem=e.depositMethodItem.channel[0],e.depositChannel=e.depositMethodItem.channel[0].id,u.value=e.depositChannelItem.minRechargeAmount,p.value=e.depositChannelItem.maxRechargeAmount,e.depositAmount=e.depositChannelItem.rechargeAmountList.length>0?e.depositChannelItem.rechargeAmountList[0]:u.value,c.barLoading=!1});const j=a=>{e.depositAmount=Number(a)},E=a=>{e.depositMethodItem=a,e.depositMethod=a.id,V(e.depositMethodItem.channel[0])},V=a=>{e.depositChannelItem=a,e.depositChannel=a.id,u.value=e.depositChannelItem.minRechargeAmount,p.value=e.depositChannelItem.maxRechargeAmount,e.depositAmount=e.depositChannelItem.rechargeAmountList.length>0?e.depositChannelItem.rechargeAmountList[0]:u.value},F=async()=>{if(!e.depositAmount){await(await S.create({message:w("deposit.toast.text1"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}if(Number(e.depositAmount)<u.value||Number(e.depositAmount)>p.value){await(await S.create({message:"".concat(w("deposit.toast.text2")," ").concat(u.value," - ").concat(p.value),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}c.fullLoading=!0;const a=await le({amount:e.depositAmount,memberChannelId:e.depositChannel});a.code==="00000"?a.data&&window.open(a.data.payURL,"_blank"):await(await S.create({message:a.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),c.fullLoading=!1};return(a,I)=>(l(),v(C,null,[O(d(t(G),{class:"online-payment"},{default:n(()=>[d(t($),{class:"ion-justify-content-between",style:{margin:"8px 0"}},{default:n(()=>[(l(!0),v(C,null,L(t(m).onlinePaymentInfo,(o,_)=>(l(),r(t(A),{key:_,size:"3.4",class:"method-item",onClick:x(b=>E(o),["stop"])},{default:n(()=>[s("div",ie,[d(M,{name:"fade"},{default:n(()=>[o.disable?(l(),r(t(y),{key:0,src:t(g)("/wallet/icon-btn-bg-disable.png")},null,8,["src"])):o.id==e.depositMethod?(l(),r(t(y),{key:1,src:t(g)("/wallet/icon-btn-bg-select.png")},null,8,["src"])):h("",!0)]),_:2},1024)]),s("div",de,[d(t(y),{src:o.disable?o.unableUrl:o.iconUrl},null,8,["src"]),s("span",null,i(o.name),1)]),o.isRecommend?(l(),r(t(N),{key:0,class:"recommend-badge",color:"danger"},{default:n(()=>[k(i(t(f))+" "+i(o.isRecommend)+"+",1)]),_:2},1024)):h("",!0),s("div",re,[d(M,{name:"fade"},{default:n(()=>[o.id==e.depositMethod?(l(),r(t(y),{key:0,src:t(g)("/wallet/icon-btn-select-m.png")},null,8,["src"])):h("",!0)]),_:2},1024)])]),_:2},1032,["onClick"]))),128)),d(t(A),null,{default:n(()=>[e.depositMethodItem.isGuide?(l(),r(t(z),{key:0,class:"btn-guide",fill:"clear",href:e.depositMethodItem.isGuide,target:"_blank",size:"small"},{default:n(()=>[k(i(a.$t("deposit.howToUse")),1)]),_:1},8,["href"])):h("",!0)]),_:1})]),_:1}),ue,d(t($),{class:"ion-justify-content-between",style:{margin:"8px 0"}},{default:n(()=>[(l(!0),v(C,null,L(e.depositMethodItem.channel,(o,_)=>(l(),r(t(A),{key:_,size:"3.3",class:"method-item",onClick:x(b=>V(o),["stop"])},{default:n(()=>[s("div",ce,[d(M,{name:"fade"},{default:n(()=>[o.id==e.depositChannel?(l(),r(t(y),{key:0,src:t(g)("/wallet/icon-btn-bg-select.png")},null,8,["src"])):h("",!0)]),_:2},1024)]),s("div",me,i(o.channelName),1),s("div",pe,[d(M,{name:"fade"},{default:n(()=>[o.id==e.depositChannel?(l(),r(t(y),{key:0,src:t(g)("/wallet/icon-btn-select-m.png")},null,8,["src"])):h("",!0)]),_:2},1024)])]),_:2},1032,["onClick"]))),128))]),_:1}),he,s("div",ge,[s("span",fe,i(a.$t("deposit.depositAmount"))+": ",1),s("span",_e,"Min: "+i(u.value.toLocaleString()),1),s("span",ye,"Max: "+i(p.value.toLocaleString()),1)]),d(t($),{style:{margin:"8px 0"}},{default:n(()=>[(l(!0),v(C,null,L(e.depositChannelItem.rechargeAmountList,(o,_)=>(l(),r(t(A),{key:_,size:"2.8",class:ee(["amount-item",{select:Number(o)==Number(e.depositAmount)}]),onClick:x(b=>j(o),["stop"])},{default:n(()=>[t(P)?(l(),r(t(N),{key:0,class:"amount-badge",color:"danger"},{default:n(()=>{var b;return[k("+"+i((b=t(m).onlinePaymentInfo)==null?void 0:b.giftList[_]),1)]}),_:2},1024)):h("",!0),s("div",null,i(t(f))+" "+i(o==null?void 0:o.toLocaleString()),1)]),_:2},1032,["class","onClick"]))),128))]),_:1}),d(t(H),{modelValue:e.depositAmount,"onUpdate:modelValue":I[0]||(I[0]=o=>e.depositAmount=o),label:t(f),type:"number",placeholder:a.$t("deposit.depositAmount"),max:p.value,min:u.value,clearInput:!0},null,8,["modelValue","label","placeholder","max","min"]),Ie,s("div",be,[s("div",ve,i(a.$t("deposit.depositTips"))+": ",1),s("span",Ce,[s("div",null,i(a.$t("deposit.message.tips1")),1),s("div",null,i(a.$t("deposit.message.tips2")),1)])])]),_:1},512),[[U,!t(c).barLoading]]),O(d(t(J),null,{default:n(()=>[d(t(z),{class:"btn-deposit",expand:"block",shape:"round",onClick:F},{default:n(()=>[k(i(a.$t("deposit.button.depositNow")),1)]),_:1})]),_:1},512),[[U,e.depositAmount]])],64))}},He={__name:"Deposit",setup(T){B();const w=D(),c=R("OnlinePayment"),m={1:{name:"deposit.onlinePayment",value:"OnlinePayment"}},P={OnlinePayment:ke};return K(async()=>{await w.getChargeInfo()}),(g,f)=>(l(),r(t(Q),{class:"deposit"},{default:n(()=>[d(t(q),null,{default:n(()=>[Object.keys(m).length>1?(l(),r(t(W),{key:0,modelValue:c.value,"onUpdate:modelValue":f[0]||(f[0]=u=>c.value=u),mode:"md",scrollable:!0},{default:n(()=>[(l(),v(C,null,L(m,(u,p)=>d(t(X),{key:p,class:"ion-text-capitalize",value:u.value},{default:n(()=>[d(t(N),{class:"recharge-badge",color:"danger"},{default:n(()=>[k(i(u.badge),1)]),_:2},1024),s("div",null,i(g.$t(u.name)),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])):h("",!0)]),_:1}),(l(),r(te,null,[(l(),r(oe(P[c.value])))],1024))]),_:1}))}};export{He as default};
