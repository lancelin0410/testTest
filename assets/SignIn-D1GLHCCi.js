import{k as x,r as I,w as B,J as L,K as o,G as t,I as S,D as a,M as m,N as p,P as r,O as U}from"./@vue-DQPB5ixA.js";import{u as $}from"./vue-i18n-D3aLYNeJ.js";import{u as A,d as O,C as D,D as _,J as v,f as d,n as G,j as M,t as b}from"./@ionic-BzoWLFGj.js";import{u as T,c as F,b as J,h as R,i as j}from"./index-BJaUFss0.js";import"./@intlify-BAcCFw_v.js";import"./@ionic_components_1-CAQXnsIn.js";import"./@stencil-C-gE1UvY.js";import"./@ionic_components_2-DUGZJZYA.js";import"./@capacitor-CHoHO2YB.js";import"./vue-router-CQQ818li.js";import"./ionicons-DKP7Q_k0.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./pinia-CYwfShO_.js";import"./jsencrypt-Ve0Y4aUG.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";const q={style:{"font-weight":"1000"}},E={slot:"start"},K=m("span",{slot:"start"},"OTP",-1),W={class:"note"},ft={__name:"SignIn",setup(z){const{t:l}=$(),P=A(),u=T(),f=F(),{getPublicUrl:C}=J(),{headerAnimation:k}=j(),e=x({device:"h5",mobile:"",sessionId:"",code:""});let h;const w=Number(u.appConfig.callPrefixes),c=I(l("account.button.otp")),n=I(0),V=async()=>{if(n.value==0){if(!e.mobile||e.mobile.length==0){await(await b.create({message:l("account.resister.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}const s=await R({mobile:u.encrypt.encrypt(e.mobile),callPrefixes:w});s.code==="00000"&&(e.sessionId=s.data.sessionId,n.value=60,y())}},y=()=>{c.value="".concat(n.value,"s"),h=setInterval(()=>{n.value>0?(n.value--,c.value="".concat(n.value,"s")):(c.value=l("account.button.otp"),n.value=0,clearInterval(h))},1e3)},N=async()=>{if(!e.mobile||e.mobile.length==0){await(await b.create({message:l("account.resister.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}if(!e.code||e.code.length==0){await(await b.create({message:l("account.resister.toast.verificationCode"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}u.fullLoading=!0,await f.mobileLogin(e),u.fullLoading=!1};return B(()=>f.isLogin,()=>{f.isLogin&&P.navigate("/","back","replace",k)}),(s,i)=>(S(),L(t(M),{class:"sign-in"},{default:o(()=>[a(t(O),{src:t(C)("/banner.webp")},null,8,["src"]),a(t(G),null,{default:o(()=>[a(t(D),{lines:"none"},{default:o(()=>[m("h5",q,p(s.$t("login.header.signIn")),1),a(t(_),null,{default:o(()=>[a(t(v),{modelValue:e.mobile,"onUpdate:modelValue":i[0]||(i[0]=g=>e.mobile=g),fill:"outline",placeholder:"Phone Number"},{default:o(()=>[m("span",E,"+"+p(t(w)),1)]),_:1},8,["modelValue"])]),_:1}),a(t(_),null,{default:o(()=>[a(t(v),{modelValue:e.code,"onUpdate:modelValue":i[1]||(i[1]=g=>e.code=g),placeholder:s.$t("account.withdrawalPassword.label.otpPlaceholder")},{default:o(()=>[K,a(t(d),{slot:"end",class:"btn-otp",color:"medium",style:{color:"#00ff84"},onClick:V},{default:o(()=>[r(p(c.value),1)]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1}),a(t(d),{class:"btn-forget",fill:"clear","router-link":"/login/forgetPW"},{default:o(()=>[r("Forget your password?")]),_:1}),a(t(d),{class:"btn-sign-in",expand:"block",onClick:U(N,["stop"])},{default:o(()=>[r(p(s.$t("login.header.signIn")),1)]),_:1}),m("div",W,[r(" New to BC.GAME? "),a(t(d),{class:"btn-sing-up",fill:"clear","router-link":"/login/signUp"},{default:o(()=>[r("Create account")]),_:1})])]),_:1})]),_:1}))}};export{ft as default};
