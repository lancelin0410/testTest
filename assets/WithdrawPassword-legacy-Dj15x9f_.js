System.register(["./@vue-legacy-D643Ih6I.js","./vue-i18n-legacy-C8AAcyDP.js","./@ionic-legacy-DJIsya6n.js","./ionicons-legacy-BylianOU.js","./index-legacy-bZKtyn7e.js","./withdraw-legacy-D4FcITZk.js","./@intlify-legacy-DDHA1rkh.js","./@ionic_components_1-legacy-C2GjtunC.js","./@stencil-legacy-Dkr4NQJU.js","./@ionic_components_2-legacy-DV709hm9.js","./@capacitor-legacy-0yG8iurR.js","./vue-router-legacy-tg1qdIBO.js","./localforage-legacy-D0pVUvDl.js","./@adjustcom-legacy-QP0zxLxB.js","./pinia-legacy-DURUUAUq.js","./jsencrypt-legacy-DGJHbPQ6.js","./pinia-plugin-persistedstate-2-legacy-CtlOhiZd.js","./@awesome-cordova-plugins-legacy-Bb45XN-u.js","./rxjs-legacy-CA8OYncU.js","./tslib-legacy-BRpw1qYg.js"],(function(a,e){"use strict";var t,o,l,s,r,n,i,d,c,w,u,p,m,h,g,y,f,P,b,v,j,x,_,V,k,I,C,O,R,$,U,L;return{setters:[a=>{t=a.k,o=a.r,l=a.J,s=a.K,r=a.G,n=a.I,i=a.b,d=a.V,c=a.D,w=a.U,u=a.M,p=a.N,m=a.P},a=>{h=a.u},a=>{g=a.o,y=a.u,f=a.C,P=a.D,b=a.J,v=a.e,j=a.P,x=a.f,_=a.n,V=a.j,k=a.t},a=>{I=a.n,C=a.x},a=>{O=a.u,R=a.m,$=a.h},a=>{U=a.f,L=a.h},null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var e=document.createElement("style");e.textContent=".withdraw-password{background-color:var(--ion-background-color)}.withdraw-password ion-list ion-item{--ion-item-background: transparent;margin-bottom:8px}.withdraw-password .btn-otp{--background: var(--ion-background-color);--background-activated: var(--ion-background-color);min-height:2rem}.withdraw-password .btn-otp::part(native){padding:2px 16px}.withdraw-password .btn-confirm{--background: linear-gradient(90deg, #24ee89, #9fe871);--background-activated: linear-gradient(40deg, #24ee89, #9fe871);--color: #000000;--box-shadow: 0 0 12px #23ee884d, 0 -2px #1dca6a inset;font-size:1.2rem;min-height:3rem;margin:16px}\n",document.head.appendChild(e);const B={slot:"start"},D=u("span",{slot:"start"},"OTP",-1);a("default",{__name:"WithdrawPassword",setup(a){const{t:e}=h(),J=y(),N=O(),S=t({withdrawPasswordOri:"",withdrawPassword:"",withdrawPasswordRepeat:"",mobile:"",code:"",sessionId:""});let T;const z=Number(N.appConfig.callPrefixes),E=o(0),G=o(e("account.button.otp")),K=o(!1),M=o(!1);g((async()=>{N.barLoading=!0;const a=await R();"00000"===a.code&&(K.value=Boolean(a.data.withdrawPasswordValid),M.value=Boolean(a.data.phoneValid)),N.barLoading=!1}));const W=async()=>{if(0==E.value){if(!S.mobile||0==S.mobile.length){const a=await k.create({message:e("account.withdrawalPassword.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0});return void(await a.present())}const a=await $({mobile:N.encrypt.encrypt(S.mobile),callPrefixes:z});"00000"===a.code&&(S.sessionId=a.data.sessionId,E.value=60,q())}},q=()=>{G.value=`${E.value}s`,T=setInterval((()=>{E.value>0?(E.value--,G.value=`${E.value}s`):(G.value=e("account.button.otp"),E.value=0,clearInterval(T))}),1e3)},A=async()=>{if(K.value&&(!S.withdrawPasswordOri||0==S.withdrawPasswordOri.length)){const a=await k.create({message:e("account.withdrawalPassword.toast.withdrawPasswdOri"),duration:1500,position:"top",color:"warning",translucent:!0});return void(await a.present())}if(!S.withdrawPassword||0==S.withdrawPassword.length){const a=await k.create({message:e("account.withdrawalPassword.toast.withdrawPasswd"),duration:1500,position:"top",color:"warning",translucent:!0});return void(await a.present())}if(S.withdrawPassword!==S.withdrawPasswordRepeat){const a=await k.create({message:e("account.withdrawalPassword.toast.withdrawPasswdRepeat"),duration:1500,position:"top",color:"warning",translucent:!0});return void(await a.present())}if(!S.mobile||0==S.mobile.length){const a=await k.create({message:e("account.withdrawalPassword.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0});return void(await a.present())}if(!S.code||0==S.code.length){const a=await k.create({message:e("account.withdrawalPassword.toast.verificationCode"),duration:1500,position:"top",color:"warning",translucent:!0});return void(await a.present())}let a;if(N.fullLoading=!0,a=K.value?await U({oldPassword:N.encrypt.encrypt(S.withdrawPasswordOri),password:N.encrypt.encrypt(S.withdrawPassword),confirmPassword:N.encrypt.encrypt(S.withdrawPasswordRepeat),mobile:M.value?"":N.encrypt.encrypt(S.mobile),code:S.code,sessionId:S.sessionId}):await L({password:N.encrypt.encrypt(S.withdrawPassword),confirmPassword:N.encrypt.encrypt(S.withdrawPasswordRepeat),mobile:M.value?"":N.encrypt.encrypt(S.mobile),code:S.code,sessionId:S.sessionId}),"00000"===a.code){const a=await k.create({message:"Success",duration:1500,position:"top",translucent:!0,icon:C,color:"success"});await a.present(),setTimeout((()=>J.back()),1e3)}N.fullLoading=!1};return(a,e)=>(n(),l(r(V),{class:"withdraw-password"},{default:s((()=>[i(c(r(_),null,{default:s((()=>[c(r(f),{lines:"none"},{default:s((()=>[K.value?(n(),l(r(P),{key:0,style:{margin:"32px 0"}},{default:s((()=>[c(r(b),{modelValue:S.withdrawPasswordOri,"onUpdate:modelValue":e[0]||(e[0]=a=>S.withdrawPasswordOri=a),type:"password",fill:"outline",placeholder:a.$t("account.withdrawalPassword.label.originalPassword")},{default:s((()=>[c(r(v),{slot:"start",icon:r(I)},null,8,["icon"]),c(r(j),{slot:"end",color:"medium"})])),_:1},8,["modelValue","placeholder"])])),_:1})):w("",!0),c(r(P),{style:{margin:"8px 0"}},{default:s((()=>[c(r(b),{modelValue:S.withdrawPassword,"onUpdate:modelValue":e[1]||(e[1]=a=>S.withdrawPassword=a),type:"password",fill:"outline",placeholder:a.$t("account.withdrawalPassword.label.password")},{default:s((()=>[c(r(v),{slot:"start",icon:r(I)},null,8,["icon"]),c(r(j),{slot:"end",color:"medium"})])),_:1},8,["modelValue","placeholder"])])),_:1}),c(r(P),{style:{margin:"8px 0 16px 0"}},{default:s((()=>[c(r(b),{modelValue:S.withdrawPasswordRepeat,"onUpdate:modelValue":e[2]||(e[2]=a=>S.withdrawPasswordRepeat=a),type:"password",fill:"outline",placeholder:a.$t("account.withdrawalPassword.label.repeatPassword")},{default:s((()=>[c(r(v),{slot:"start",icon:r(I)},null,8,["icon"]),c(r(j),{slot:"end",color:"medium"})])),_:1},8,["modelValue","placeholder"])])),_:1}),c(r(P),{style:{margin:"16px 0 8px 0"}},{default:s((()=>[c(r(b),{modelValue:S.mobile,"onUpdate:modelValue":e[3]||(e[3]=a=>S.mobile=a),fill:"outline",placeholder:a.$t("account.withdrawalPassword.label.phone")},{default:s((()=>[u("span",B,"+"+p(r(z)),1)])),_:1},8,["modelValue","placeholder"])])),_:1}),c(r(P),{style:{margin:"8px 0"}},{default:s((()=>[c(r(b),{modelValue:S.code,"onUpdate:modelValue":e[4]||(e[4]=a=>S.code=a),fill:"outline",placeholder:a.$t("account.withdrawalPassword.label.otpPlaceholder")},{default:s((()=>[D,c(r(x),{slot:"end",class:"btn-otp",color:"medium",style:{color:"#00ff84"},onClick:W},{default:s((()=>[m(p(G.value),1)])),_:1})])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1}),c(r(x),{class:"btn-confirm",expand:"block",shape:"round",onClick:A},{default:s((()=>[m("Confirm")])),_:1})])),_:1},512),[[d,!r(N).barLoading]])])),_:1}))}})}}}));
