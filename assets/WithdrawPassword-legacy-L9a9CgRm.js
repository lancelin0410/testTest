System.register(["./@vue-legacy-B1lBwRMN.js","./vue-i18n-legacy-C4VmqYOX.js","./@ionic-legacy-CfoxM6Ox.js","./ionicons-legacy-gi9jGAtT.js","./index-legacy-32QwbpAN.js","./withdraw-legacy-dofu9Bi4.js","./@intlify-legacy-DDHA1rkh.js","./@ionic_components_1-legacy-C2GjtunC.js","./@stencil-legacy-Dkr4NQJU.js","./@ionic_components_2-legacy-DV709hm9.js","./@capacitor-legacy-0yG8iurR.js","./vue-router-legacy-8x9mO75R.js","./localforage-legacy-D0pVUvDl.js","./@adjustcom-legacy-QP0zxLxB.js","./pinia-legacy-B2ukCLEo.js","./jsencrypt-legacy-DGJHbPQ6.js","./pinia-plugin-persistedstate-2-legacy-CtlOhiZd.js","./@awesome-cordova-plugins-legacy-Bb45XN-u.js","./rxjs-legacy-CA8OYncU.js","./tslib-legacy-BRpw1qYg.js"],(function(a,e){"use strict";var t,o,l,s,r,n,i,d,c,w,u,p,m,g,h,y,f,P,b,v,j,x,_,k,V,I,O,R,C,$,L,U;return{setters:[a=>{t=a.k,o=a.r,l=a.I,s=a.J,r=a.G,n=a.K,i=a.b,d=a.L,c=a.D,w=a.Y,u=a.M,p=a.P,m=a.R},a=>{g=a.u},a=>{h=a.o,y=a.u,f=a.y,P=a.z,b=a.E,v=a.k,j=a.P,x=a.l,_=a.v,k=a.p,V=a.t},a=>{I=a.n,O=a.x},a=>{R=a.u,C=a.k,$=a.f},a=>{L=a.f,U=a.h},null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var e=document.createElement("style");e.textContent=".withdraw-password{background-color:var(--ion-background-color)}.withdraw-password ion-list ion-item{--ion-item-background: transparent;margin-bottom:8px}.withdraw-password .btn-otp{--background: var(--ion-background-color);--background-activated: var(--ion-background-color);min-height:2rem}.withdraw-password .btn-otp::part(native){padding:2px 16px}.withdraw-password .btn-confirm{--background: linear-gradient(90deg, #24ee89, #9fe871);--background-activated: linear-gradient(40deg, #24ee89, #9fe871);--color: #000000;--box-shadow: 0 0 12px #23ee884d, 0 -2px #1dca6a inset;font-size:1.2rem;min-height:3rem;margin:16px}\n",document.head.appendChild(e);const z={slot:"start"},B=u("span",{slot:"start"},"OTP",-1);a("default",{__name:"WithdrawPassword",setup(a){const{t:e}=g(),E=y(),S=R(),T=t({withdrawPasswordOri:"",withdrawPassword:"",withdrawPasswordRepeat:"",mobile:"",code:"",sessionId:""});let D;const G=Number(S.appConfig.callPrefixes),J=o(0),K=o(e("account.button.otp")),M=o(!1),N=o(!1);h((async()=>{S.barLoading=!0;const a=await C();"00000"===a.code&&(M.value=Boolean(a.data.withdrawPasswordValid),N.value=Boolean(a.data.phoneValid)),S.barLoading=!1}));const W=async()=>{if(0==J.value){if(!T.mobile||0==T.mobile.length){const a=await V.create({message:e("account.withdrawalPassword.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0});return void(await a.present())}const a=await $({mobile:S.encrypt.encrypt(T.mobile),callPrefixes:G});"00000"===a.code&&(T.sessionId=a.data.sessionId,J.value=60,Y())}},Y=()=>{K.value=`${J.value}s`,D=setInterval((()=>{J.value>0?(J.value--,K.value=`${J.value}s`):(K.value=e("account.button.otp"),J.value=0,clearInterval(D))}),1e3)},Z=async()=>{if(M.value&&(!T.withdrawPasswordOri||0==T.withdrawPasswordOri.length)){const a=await V.create({message:e("account.withdrawalPassword.toast.withdrawPasswdOri"),duration:1500,position:"top",color:"warning",translucent:!0});return void(await a.present())}if(!T.withdrawPassword||0==T.withdrawPassword.length){const a=await V.create({message:e("account.withdrawalPassword.toast.withdrawPasswd"),duration:1500,position:"top",color:"warning",translucent:!0});return void(await a.present())}if(T.withdrawPassword!==T.withdrawPasswordRepeat){const a=await V.create({message:e("account.withdrawalPassword.toast.withdrawPasswdRepeat"),duration:1500,position:"top",color:"warning",translucent:!0});return void(await a.present())}if(!T.mobile||0==T.mobile.length){const a=await V.create({message:e("account.withdrawalPassword.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0});return void(await a.present())}if(!T.code||0==T.code.length){const a=await V.create({message:e("account.withdrawalPassword.toast.verificationCode"),duration:1500,position:"top",color:"warning",translucent:!0});return void(await a.present())}let a;if(S.fullLoading=!0,a=M.value?await L({oldPassword:S.encrypt.encrypt(T.withdrawPasswordOri),password:S.encrypt.encrypt(T.withdrawPassword),confirmPassword:S.encrypt.encrypt(T.withdrawPasswordRepeat),mobile:N.value?"":S.encrypt.encrypt(T.mobile),code:T.code,sessionId:T.sessionId}):await U({password:S.encrypt.encrypt(T.withdrawPassword),confirmPassword:S.encrypt.encrypt(T.withdrawPasswordRepeat),mobile:N.value?"":S.encrypt.encrypt(T.mobile),code:T.code,sessionId:T.sessionId}),"00000"===a.code){const a=await V.create({message:"Success",duration:1500,position:"top",translucent:!0,icon:O,color:"success"});await a.present(),setTimeout((()=>E.back()),1e3)}S.fullLoading=!1};return(a,e)=>(n(),l(r(k),{class:"withdraw-password"},{default:s((()=>[i(c(r(_),null,{default:s((()=>[c(r(f),{lines:"none"},{default:s((()=>[M.value?(n(),l(r(P),{key:0,style:{margin:"32px 0"}},{default:s((()=>[c(r(b),{modelValue:T.withdrawPasswordOri,"onUpdate:modelValue":e[0]||(e[0]=a=>T.withdrawPasswordOri=a),type:"password",fill:"outline",placeholder:a.$t("account.withdrawalPassword.label.originalPassword")},{default:s((()=>[c(r(v),{slot:"start",icon:r(I)},null,8,["icon"]),c(r(j),{slot:"end",color:"medium"})])),_:1},8,["modelValue","placeholder"])])),_:1})):w("",!0),c(r(P),{style:{margin:"8px 0"}},{default:s((()=>[c(r(b),{modelValue:T.withdrawPassword,"onUpdate:modelValue":e[1]||(e[1]=a=>T.withdrawPassword=a),type:"password",fill:"outline",placeholder:a.$t("account.withdrawalPassword.label.password")},{default:s((()=>[c(r(v),{slot:"start",icon:r(I)},null,8,["icon"]),c(r(j),{slot:"end",color:"medium"})])),_:1},8,["modelValue","placeholder"])])),_:1}),c(r(P),{style:{margin:"8px 0 16px 0"}},{default:s((()=>[c(r(b),{modelValue:T.withdrawPasswordRepeat,"onUpdate:modelValue":e[2]||(e[2]=a=>T.withdrawPasswordRepeat=a),type:"password",fill:"outline",placeholder:a.$t("account.withdrawalPassword.label.repeatPassword")},{default:s((()=>[c(r(v),{slot:"start",icon:r(I)},null,8,["icon"]),c(r(j),{slot:"end",color:"medium"})])),_:1},8,["modelValue","placeholder"])])),_:1}),c(r(P),{style:{margin:"16px 0 8px 0"}},{default:s((()=>[c(r(b),{modelValue:T.mobile,"onUpdate:modelValue":e[3]||(e[3]=a=>T.mobile=a),fill:"outline",placeholder:a.$t("account.withdrawalPassword.label.phone")},{default:s((()=>[u("span",z,"+"+p(r(G)),1)])),_:1},8,["modelValue","placeholder"])])),_:1}),c(r(P),{style:{margin:"8px 0"}},{default:s((()=>[c(r(b),{modelValue:T.code,"onUpdate:modelValue":e[4]||(e[4]=a=>T.code=a),fill:"outline",placeholder:a.$t("account.withdrawalPassword.label.otpPlaceholder")},{default:s((()=>[B,c(r(x),{slot:"end",class:"btn-otp",color:"medium",style:{color:"#00ff84"},onClick:W},{default:s((()=>[m(p(K.value),1)])),_:1})])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1}),c(r(x),{class:"btn-confirm",expand:"block",shape:"round",onClick:Z},{default:s((()=>[m("Confirm")])),_:1})])),_:1},512),[[d,!r(S).barLoading]])])),_:1}))}})}}}));
