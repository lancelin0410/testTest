import{r as m,H as v,I as S,J as n,L as a,M as t,C as s,E as e,N as f,O as g,j as T,B as Y,a as G,U as X,P as M,S as D,Q as Z,F as x,Y as tt}from"./@vue-B0j_qcai.js";import{u as at}from"./vue-i18n-DzMZFiEd.js";import{u as z,f as b,Q as V,d as et,e as O,K as F,b as ot,C as R,B as $,n as U,P as st,I as nt,m as it,q as lt,o as rt,j as dt,c as ut,t as L}from"./@ionic-Bc3KAXgC.js";import{k as ct,c as wt}from"./ionicons-vS9WG2d3.js";import{d as E,a as pt,c as ht,b as mt}from"./index-BLTQj5AA.js";import"./@capacitor-CHoHO2YB.js";import{g as ft,c as gt}from"./withdraw-r-nWjeZZ.js";import"./@intlify-BAcCFw_v.js";import"./@ionic_components_1-CG1weR9z.js";import"./@stencil-pJInS8Bp.js";import"./@ionic_components_2-DZGN-9Y0.js";import"./vue-router-BLYQmdkJ.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./pinia-Ds326xZN.js";import"./jsencrypt-Ve0Y4aUG.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";const _t={class:"wrapper"},vt={class:"dialog-title"},bt={class:"dialog-content"},At={class:"btn-group"},$t={__name:"SetPasswordPopup",setup(W,{expose:A}){const k=z(),{popupEnter:h,popupLeave:N}=E(),r=m(!1),y=async()=>{r.value=!0},_=()=>{r.value=!1,k.push({name:"WithdrawPassword"})};return A({showDialog:y}),(c,u)=>(v(),S(e(V),{class:"setPassword-popup",isOpen:r.value,enterAnimation:e(h),leaveAnimation:e(N),onDidDismiss:u[1]||(u[1]=w=>r.value=!1)},{default:n(()=>[a("div",_t,[a("h3",vt,t(c.$t("withdraw.setPasswordPopup.title")),1),a("div",bt,t(c.$t("withdraw.setPasswordPopup.des")),1),a("div",At,[s(e(b),{class:"btn-cancel ion-text-capitalize",fill:"solid",shape:"round",onClick:u[0]||(u[0]=f(w=>r.value=!1,["stop"]))},{default:n(()=>[g(t(c.$t("withdraw.button.cancel")),1)]),_:1}),s(e(b),{class:"btn-confirm ion-text-capitalize",fill:"solid",shape:"round",onClick:f(_,["stop"])},{default:n(()=>[g(t(c.$t("withdraw.button.goToSetPassword")),1)]),_:1})])])]),_:1},8,["isOpen","enterAnimation","leaveAnimation"]))}},kt={class:"wrapper"},yt={class:"dialog-title"},Ct={class:"dialog-content"},Pt={class:"btn-group"},It={__name:"BankCardPopup",setup(W,{expose:A}){const k=z(),{popupEnter:h,popupLeave:N}=E(),r=m(!1),y=async()=>{r.value=!0},_=()=>{r.value=!1,k.push({name:"BankCardList"})};return A({showDialog:y}),(c,u)=>(v(),S(e(V),{class:"bankCard-popup",isOpen:r.value,enterAnimation:e(h),leaveAnimation:e(N),onDidDismiss:u[1]||(u[1]=w=>r.value=!1)},{default:n(()=>[a("div",kt,[a("h3",yt,t(c.$t("withdraw.bankCardPopup.title")),1),a("div",Ct,t(c.$t("withdraw.bankCardPopup.des")),1),a("div",Pt,[s(e(b),{class:"btn-cancel ion-text-capitalize",fill:"solid",shape:"round",onClick:u[0]||(u[0]=f(w=>r.value=!1,["stop"]))},{default:n(()=>[g(t(c.$t("withdraw.button.cancel")),1)]),_:1}),s(e(b),{class:"btn-confirm ion-text-capitalize",fill:"solid",shape:"round",onClick:f(_,["stop"])},{default:n(()=>[g(t(c.$t("withdraw.button.addNewAccount")),1)]),_:1})])])]),_:1},8,["isOpen","enterAnimation","leaveAnimation"]))}},Lt={class:"balance-card"},St={class:"balance-content"},Nt={class:"balance-title"},Bt={class:"balance-amount"},Dt={style:{margin:"4px 0"}},zt={class:"block-title ion-justify-content-between",style:{display:"flex"}},Vt={style:{margin:"4px 0"}},Wt={class:"block-title"},Tt={key:0},Mt=a("hr",null,null,-1),Ot={slot:"start",style:{color:"rgb(179, 190, 193)","font-size":"0.8rem"}},Ft={slot:"end"},Rt={slot:"start",style:{color:"rgb(179, 190, 193)","font-size":"0.8rem"}},Ut={slot:"end"},Et={slot:"start",style:{color:"rgb(179, 190, 193)","font-size":"0.8rem"}},jt={slot:"end"},Ht={slot:"start",style:{color:"rgb(179, 190, 193)","font-size":"0.8rem"}},Qt={slot:"end"},qt=a("hr",null,null,-1),Jt={style:{margin:"4px 0"}},Kt={class:"block-title"},Yt={style:{"font-size":"0.8rem"}},Gt={style:{color:"#ffdf3f","margin-left":"4px"}},Xt={style:{color:"#ffdf3f","margin-left":"4px"}},Zt={class:"account-number"},xt={class:"account-text"},ta=a("br",null,null,-1),aa={slot:"start",style:{color:"rgb(179, 190, 193)","font-size":"0.8rem"}},ea={slot:"end"},oa={slot:"start",style:{color:"rgb(179, 190, 193)","font-size":"0.8rem"}},sa={slot:"end"},na={style:{"font-size":"0.8rem",color:"#fa8484"}},ia={style:{color:"#ffdf3f",margin:"0 4px"}},la={style:{margin:"4px 0"}},ra={class:"block-title"},da={slot:"start",style:{color:"rgb(179, 190, 193)","font-size":"0.8rem"}},ua={slot:"end"},ca={style:{margin:"4px 0"}},wa={class:"block-title"},Va={__name:"Withdraw",setup(W){const{t:A}=at(),k=z(),h=pt();ht();const{getImgUrl:N}=mt(),r=m(null),y=m(null),_=m(!1),c=m(!1),u=m(1),w="â‚¹",C=m(0),B=m(0),P=m([]),l=T({withdrawAmount:0,remainingWithdrawLimit:"",remainingWithdrawCount:"",withdrawLimit:"",vipDailyLimit:"",balance:"",bankInfo:{},withdrawAccounts:[]}),d=T({withdrawAmount:0,withdrawFee:0,arrivalAmount:0,bankAccount:"",serviceCharge:0,withdrawPassword:""});Y(async()=>{h.barLoading=!0,l.withdrawAccounts=[{id:210,userId:3506,withdrawType:1,withdrawTypeId:1,withdrawAccount:{accountName:"Lucky",accountIfsc:"ABCD0777777",accountNumber:"111111",CNIC:null}}],c.value=!0,u.value=2,l.remainingWithdrawLimit=2e3,l.withdrawLimit=0,l.remainingWithdrawCount=2,l.vipDailyLimit=2e3,l.balance=7810,P.value=[120,500,1e3,2e3,5e3,1e4,2e4,5e4,1e5],C.value=P.value[0],B.value=P.value[P.value.length-1],l.withdrawAmount=C.value,h.barLoading=!1});const j=o=>{l.withdrawAmount=Number(o)},H=()=>{c.value?k.push({name:"BankCardList"}):r.value.showDialog()},Q=()=>{c.value?k.push({name:"BankCardList"}):r.value.showDialog()},q=async()=>{if(!c.value){r.value.showDialog();return}if(l.withdrawAccounts.length==0){y.value.showDialog();return}if(u.value==1&&Number(l.withdrawAmount)<=0){await(await L.create({message:A("withdraw.toast.text3"),duration:1500,position:"top",color:"danger",translucent:!0})).present();return}if(Number(l.withdrawAmount)<C.value||Number(l.withdrawAmount)>B.value){await(await L.create({message:"Min: ".concat(C.value," Max: ").concat(B.value),duration:1500,position:"top",color:"danger",translucent:!0})).present();return}h.fullLoading=!0;const o=await ft({withdrawAmount:l.withdrawAmount});o.state==="200"?(d.arrivalAmount=o.arrivalAmount,d.bankAccount=o.bankAccount||l.bankInfo.withdrawAccount.accountNumber,d.serviceCharge=o.serviceCharge,d.withdrawAmount=o.withdrawAmount,d.withdrawFee=o.withdrawFee,d.withdrawPassword="",_.value=!0):await(await L.create({message:o.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),h.fullLoading=!1},J=async()=>{if(d.withdrawPassword.length==0){await(await L.create({message:A("withdraw.toast.text1"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}h.fullLoading=!0;const o=await gt({withdrawAmount:d.withdrawAmount,withdrawPasswd:d.withdrawPassword,withdrawTypeId:l.bankInfo.withdrawTypeId});o.state==="200"?(await(await L.create({message:A("withdraw.toast.text2"),duration:1500,position:"top",color:"success",translucent:!0})).present(),_.value=!1):await(await L.create({message:o.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),h.fullLoading=!1};return(o,p)=>G((v(),S(e(dt),{class:"withdraw"},{default:n(()=>[s(e(U),null,{default:n(()=>{var I;return[a("div",Lt,[s(e(et),{src:e(N)("/wallet/img-bg-balance.png")},null,8,["src"]),a("div",St,[a("div",Nt,t(o.$t("withdraw.myBalance")),1),a("div",Bt,t(e(w))+" "+t((I=l.balance)==null?void 0:I.toLocaleString()),1)])]),a("div",Dt,[a("div",zt,[a("span",null,t(o.$t("withdraw.bankAccount")),1),a("span",{class:"btn-change-account",onClick:f(Q,["stop"])},t(o.$t("withdraw.changeBankAccount")),1)]),s(e(b),{class:"btn-add-account",expand:"block",onClick:f(H,["stop"])},{default:n(()=>[s(e(O),{slot:"start",icon:e(ct)},null,8,["icon"]),a("span",null,t(o.$t("withdraw.addNewAccount")),1)]),_:1})]),a("div",Vt,[a("div",Wt,[g(t(o.$t("withdraw.withdrawAmount"))+" ",1),u.value==1?(v(),M("span",Tt,"("+t(e(w))+" "+t(C.value)+" - "+t(B.value)+" )",1)):D("",!0)]),u.value==1?(v(),S(e(F),{key:0,modelValue:l.withdrawAmount,"onUpdate:modelValue":p[0]||(p[0]=i=>l.withdrawAmount=i),label:e(w),type:"number",placeholder:o.$t("withdraw.withdrawAmount"),max:B.value,min:C.value,clearInput:!0},null,8,["modelValue","label","placeholder","max","min"])):D("",!0),u.value==2?(v(),S(e(ot),{key:1,style:{margin:"8px 0"}},{default:n(()=>[(v(!0),M(x,null,Z(P.value,(i,K)=>(v(),S(e(ut),{key:K,size:"3.8",class:tt(["amount-item",{select:Number(i)==Number(l.withdrawAmount)}]),onClick:f(pa=>j(i),["stop"])},{default:n(()=>[a("div",null,t(e(w))+" "+t(i==null?void 0:i.toLocaleString()),1)]),_:2},1032,["class","onClick"]))),128))]),_:1})):D("",!0)]),Mt,s(e(R),null,{default:n(()=>[s(e($),{class:"limit-item",lines:"none"},{default:n(()=>{var i;return[a("span",Ot,t(o.$t("withdraw.items1"))+":",1),a("span",Ft,t(e(w))+" "+t((i=l.remainingWithdrawLimit)==null?void 0:i.toLocaleString()),1)]}),_:1}),s(e($),{class:"limit-item",lines:"none"},{default:n(()=>{var i;return[a("span",Rt,t(o.$t("withdraw.items2"))+":",1),a("span",Ut,t(e(w))+" "+t((i=l.vipDailyLimit)==null?void 0:i.toLocaleString()),1)]}),_:1}),s(e($),{class:"limit-item",lines:"none"},{default:n(()=>{var i;return[a("span",Et,t(o.$t("withdraw.items3"))+":",1),a("span",jt,t(e(w))+" "+t((i=l.withdrawLimit)==null?void 0:i.toLocaleString()),1)]}),_:1}),s(e($),{class:"limit-item",lines:"none"},{default:n(()=>{var i;return[a("span",Ht,t(o.$t("withdraw.items4"))+":",1),a("span",Qt,t((i=l.remainingWithdrawCount)==null?void 0:i.toLocaleString()),1)]}),_:1})]),_:1}),qt,a("div",Jt,[a("div",Kt,t(o.$t("withdraw.tips.title"))+": ",1),a("span",Yt,[a("span",null,t(o.$t("withdraw.tips.tips1")),1),a("span",Gt,t(o.$t("withdraw.tips.tips2")),1),a("span",null,t(o.$t("withdraw.tips.tips3")),1),a("span",Xt,t(o.$t("withdraw.tips.tips4")),1),g(". ")])])]}),_:1}),s(e(st),null,{default:n(()=>[s(e(b),{class:"btn-withdraw",expand:"block",shape:"round",onClick:f(q,["stop"])},{default:n(()=>[g(t(o.$t("withdraw.button.withdraw")),1)]),_:1})]),_:1}),s($t,{ref_key:"setPasswordPopup",ref:r},null,512),s(It,{ref_key:"bankCardPopup",ref:y},null,512),s(e(V),{class:"withdraw-info","is-open":_.value,"initial-breakpoint":1,breakpoints:[0,1]},{default:n(()=>[s(e(nt),null,{default:n(()=>[s(e(it),null,{default:n(()=>[s(e(lt),null,{default:n(()=>[g(t(o.$t("withdraw.configPopup.title")),1)]),_:1}),s(e(rt),{style:{position:"absolute",top:"0",right:"16px"}},{default:n(()=>[s(e(b),{onClick:p[1]||(p[1]=f(I=>_.value=!1,["stop"]))},{default:n(()=>[s(e(O),{slot:"icon-only",icon:e(wt),color:"light"},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),s(e(U),{class:"ion-padding"},{default:n(()=>{var I;return[a("div",Zt,t(e(w))+" "+t((I=d.arrivalAmount)==null?void 0:I.toLocaleString()),1),a("div",xt,t(o.$t("withdraw.configPopup.arrivalAmount")),1),ta,s(e(R),null,{default:n(()=>[s(e($),{class:"detail-item",lines:"none"},{default:n(()=>{var i;return[a("span",aa,t(o.$t("withdraw.configPopup.title"))+":",1),a("span",ea,t(e(w))+" "+t((i=d.withdrawAmount)==null?void 0:i.toLocaleString()),1)]}),_:1}),s(e($),{class:"detail-item",lines:"none"},{default:n(()=>{var i;return[a("span",oa,t(o.$t("withdraw.configPopup.serviceCharge"))+":",1),a("span",sa,t(e(w))+" "+t((i=d.serviceCharge)==null?void 0:i.toLocaleString()),1)]}),_:1}),a("div",na,[a("span",null,t(o.$t("withdraw.configPopup.des1")),1),a("span",ia,t(d.withdrawFee)+"%",1),a("span",null,t(o.$t("withdraw.configPopup.des2")),1)]),a("div",la,[a("div",ra,t(o.$t("withdraw.configPopup.chooseBankAccount")),1),s(e($),{class:"detail-item",lines:"none"},{default:n(()=>[a("span",da,t(o.$t("withdraw.configPopup.yourBankAccount"))+":",1),a("span",ua,t(d.bankAccount),1)]),_:1})])]),_:1}),a("div",ca,[a("div",wa,t(o.$t("withdraw.configPopup.withdrawPassword")),1),s(e(F),{modelValue:d.withdrawPassword,"onUpdate:modelValue":p[2]||(p[2]=i=>d.withdrawPassword=i),placeholder:o.$t("withdraw.configPopup.placeHolder")},null,8,["modelValue","placeholder"])]),s(e(b),{class:"btn-withdraw",expand:"block",shape:"round",onClick:f(J,["stop"])},{default:n(()=>[g(t(o.$t("withdraw.button.withdraw")),1)]),_:1})]}),_:1})]),_:1},8,["is-open"])]),_:1},512)),[[X,P.value.length>0]])}};export{Va as default};
