import{aS as b,ax as M,aX as B,aK as p,s as k,bH as u,I as i,v,b9 as g,u as y,H as C,F as x,aV as P,r as A}from"./@vue-Dkad1Scs.js";import{V as U,a as V,b as S,c as H,d as $,e as q,f as D,g as E,h as J,i as j}from"./vuetify-BpcycB79.js";/* empty css             */import{V as F}from"./vue3-beautiful-chat-DLJUIo1Z.js";import"./vue-BghDAyl9.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&d(f)}).observe(document,{childList:!0,subtree:!0});function c(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function d(a){if(a.ep)return;a.ep=!0;const l=c(a);fetch(a.href,l)}})();async function w({url:r,method:n,data:c}){console.log(r);const d="https://www.teenteen123.com",a=101,l=new AbortController;setTimeout(()=>l.abort(),3e4);const f={appId:a,languageType:"EN",sign:"9310a4024d28e726",uid:"e15f5aadb3c3470ebda51c53486f40e1"};let _;return await fetch(`${d}${r}`,{method:n,body:JSON.stringify({...f,...c}),headers:{"Content-Type":"application/json"},signal:l.signal}).then(s=>s.json()).catch(s=>console.error("Error:",s)).then(s=>{s.state=="200"?_=s.resultData:console.error("Error:",s.msg)}),_}function K(r){return w({url:"/customer/index",method:"POST",data:r})}function W(r){return w({url:"/customer/get",method:"POST",data:r})}function z(r){return w({url:"/customer/success",method:"POST",data:r})}function G(r){return w({url:"/customer/fail",method:"POST",data:r})}const X={class:"customer-info"},Y={class:"msg_text"},Q=["innerHTML"],R={class:"msg_text"},Z={key:3},tt={key:4},et={class:"msg_text"},at="https://storage.googleapis.com/baowang-admin",ot={__name:"App",setup(r){const n=b([]),c=b([]),d=b(0),a=b(!0),l={header:{bg:"#ffffff",text:"#4e8cff"},launcher:{bg:"#4e8cff"},messageList:{bg:"#eaeaea"},sentMessage:{bg:"#4e8cff",text:"#ffffff"},receivedMessage:{bg:"#ffffff",text:"#222222"},userInput:{bg:"#f4f7f9",text:"#565867"}},f=(e=!1)=>{e&&(c.value=[]),K().then(t=>{n.value=[t.customerAccount].map(m=>(m.imageUrl=at+m.imageUrl,m)),console.log(JSON.parse(t.data)),c.value.push({id:0,type:"text",author:n.value[0].id,data:{type:t.type,text:t.reply||"Hello Sir is there any thing I can help you with?",list:JSON.parse(t.data)}})}).catch(t=>console.log(t))};M(()=>f(!0));const _=async e=>{e.display&&e.display.length>0&&(d.value=a.value?d.value:d.value+1,s({author:"me",type:"text",data:{text:e.display}})),e.type==-1?s({author:n.value[0].id,type:"text",data:{type:e.type,text:"Please click the button below to contact Senior Customer Service",btnText:"Senior Customer Service",link:e.link}}):e.type==0?f():e.type==1?s({author:n.value[0].id,type:"text",data:{type:e.type,text:e.text}}):W({questionId:e.id}).then(t=>{console.log(t),!t||!t.data&&!t.reply?s({author:n.value[0].id,type:"text",data:{type:0,text:"No record Data"}}):(console.log(JSON.parse(t.data||"[]")),s({author:n.value[0].id,type:"text",data:{type:t.type,text:t.reply||"",list:JSON.parse(t.data||"[]")}}))}).catch(t=>console.log(t))},s=e=>{c.value.push(e)},O=e=>{s({author:"me",type:"text",data:{text:"Solve issue"}}),z({questionId:e.id}).then(t=>{console.log(t),s({author:n.value[0].id,type:"text",data:{text:e.list.solve_reply}})})},L=e=>{s({author:"me",type:"text",data:{text:"Unsolve issue"}}),G({questionId:e.id}).then(t=>{console.log(t),s({author:n.value[0].id,type:"text",data:{type:2,text:e.list.unsolve_reply,list:[{type:0,display:e.list.unsolve_select_text},{type:-1,display:e.list.unsolve_customer_text,link:e.list.customer_link}]}})})},I=()=>{a.value=!0,d.value=0,c.value[c.value.length-1].id!=0&&f()},N=()=>{a.value=!1};return(e,t)=>{const m=B("beautiful-chat");return p(),k(J,null,{default:u(()=>[i(E,null,{default:u(()=>[i(m,{participants:n.value,onMessageWasSent:s,messageList:c.value,newMessagesCount:d.value,isOpen:a.value,open:I,showHeader:!0,showLauncher:!0,showCloseButton:!1,colors:l,alwaysScrollToBottom:!0,disableUserListToggle:!0},{header:u(()=>{var o;return[t[1]||(t[1]=v("div",{class:"header-text"},"Customer Service Center",-1)),v("div",X,[i(U,{color:"surface-variant"},{default:u(()=>{var h;return[i(V,{src:(h=n.value[0])==null?void 0:h.imageUrl},null,8,["src"])]}),_:1}),v("span",null,g((o=n.value[0])==null?void 0:o.name)+" is serving",1)]),i(S,{class:"btn-close",icon:"$close",size:"large",variant:"text",onClick:N})]}),"text-message-body":u(({message:o})=>[o.data.type==-1?(p(),y(x,{key:0},[v("div",Y,g(o.data.text),1),i(S,{class:"btn-cs",density:"compact",flat:"",block:"",href:o.data.link,target:"_blank"},{default:u(()=>[C(g(o.data.btnText),1)]),_:2},1032,["href"])],64)):o.data.type==1?(p(),y("div",{key:1,innerHTML:o.data.text},null,8,Q)):o.data.type==2?(p(),y(x,{key:2},[v("div",R,g(o.data.text),1),i(H,{density:"compact",lines:"one"},{default:u(()=>[(p(!0),y(x,null,P(o.data.list,(h,T)=>(p(),k($,{key:T,title:h.display,"min-height":"1rem",onClick:lt=>_(h)},null,8,["title","onClick"]))),128))]),_:2},1024)],64)):o.data.type==3?(p(),y("div",Z,"充值列表")):o.data.type==4?(p(),y("div",tt,"提現列表")):o.data.type==5?(p(),y(x,{key:5},[v("div",et,g(o.data.text),1),i(q,{density:"compact",flat:""},{default:u(()=>[i(S,{class:"btn-solve",onClick:h=>O(o.data)},{default:u(()=>t[2]||(t[2]=[C("Yes")])),_:2},1032,["onClick"]),i(S,{class:"btn-unsolve",onClick:h=>L(o.data)},{default:u(()=>t[3]||(t[3]=[C("No")])),_:2},1032,["onClick"])]),_:2},1024)],64)):(p(),y(x,{key:6},[C(g(o.data.text),1)],64))]),_:1},8,["participants","messageList","newMessagesCount","isOpen"]),i(D,{modelValue:e.showImg,"onUpdate:modelValue":t[0]||(t[0]=o=>e.showImg=o),height:"100%",width:"100%"},{default:u(()=>[v("template",null,[i(V,{"aspect-ratio":1,class:"bg-white",src:"https://cdn.vuetifyjs.com/images/parallax/material.jpg",width:"100%"})])]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},st=j(),nt=A(ot);nt.use(st).use(F).mount("#app");
