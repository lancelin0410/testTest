import{u as $}from"./vue-i18n-DQsz-j5M.js";import{J as p,d as b,K as g,f as v,n as R,O as x,j as O,t as c}from"./@ionic-cajVy0nw.js";import{a as S,c as U,b as B,f as T}from"./index-BOvGkc1M.js";import{s as N}from"./withdraw-DPbb91XL.js";import{j as L,r as I,I as M,J as r,E as a,H as j,C as s,L as i,M as w,O as _}from"./@vue-DSZqUJEn.js";import"./@intlify-BAcCFw_v.js";import"./@ionic_components_1-CG1weR9z.js";import"./@stencil-pJInS8Bp.js";import"./@ionic_components_2-DZGN-9Y0.js";import"./@capacitor-CHoHO2YB.js";import"./vue-router-DMBiYGXd.js";import"./ionicons-vS9WG2d3.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./pinia-DXl0KkUU.js";import"./jsencrypt-Ve0Y4aUG.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";const D={style:{margin:"4px 0"}},J={class:"block-title"},W={style:{margin:"4px 0"}},q={class:"block-title"},A={style:{margin:"4px 0"}},E={class:"block-title"},F={class:"input-prefix",slot:"start"},G=i("br",null,null,-1),H=i("span",{class:"input-prefix",slot:"start"},"OTP",-1),ft={__name:"WithdrawPassword",setup(K){const{t:l}=$(),f=S(),m=U(),{getImgUrl:h}=B(),t=L({withdrawPasswd:"",withdrawPasswdRepeat:"",mobile:m.userInfo.mobile?m.userInfo.mobile.substring(2):"",verificationCode:"",canModifyPwd:!m.userInfo.mobile});let P;const V="+91",n=I(0),u=I(l("account.button.otp")),C=async()=>{if(n.value==0){if(!t.mobile||t.mobile.length==0){await(await c.create({message:l("account.withdrawalPassword.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}const e=await T({tel:t.mobile});e.state=="200"&&(n.value=e.resultData,y())}},y=()=>{u.value="".concat(n.value,"s"),P=setInterval(()=>{n.value>0?(n.value--,u.value="".concat(n.value,"s")):(u.value=l("account.button.otp"),n.value=0,clearInterval(P))},1e3)},k=async()=>{if(!t.withdrawPasswd||t.withdrawPasswd.length==0){await(await c.create({message:l("account.withdrawalPassword.toast.withdrawPasswd"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}if(t.withdrawPasswd!==t.withdrawPasswdRepeat){await(await c.create({message:l("account.withdrawalPassword.toast.withdrawPasswdRepeat"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}if(!t.mobile||t.mobile.length==0){await(await c.create({message:l("account.withdrawalPassword.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}if(!t.verificationCode||t.verificationCode.length==0){await(await c.create({message:l("account.withdrawalPassword.toast.verificationCode"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}f.fullLoading=!0,(await N({withdrawPasswd:t.withdrawPasswd,withdrawPasswdRepeat:t.withdrawPasswdRepeat,mobile:t.canModifyPwd?t.mobile:null,verificationCode:t.verificationCode})).state=="200"&&(await(await c.create({message:"Success",duration:1500,position:"top",translucent:!0,icon:checkmarkOutline,color:"success"})).present(),setTimeout(()=>router.go(-1),1e3)),f.fullLoading=!1};return(e,o)=>(j(),M(a(O),{class:"withdraw-password"},{default:r(()=>[s(a(R),null,{default:r(()=>[i("div",D,[i("div",J,w(e.$t("account.withdrawalPassword.label.password")),1),s(a(p),{modelValue:t.withdrawPasswd,"onUpdate:modelValue":o[0]||(o[0]=d=>t.withdrawPasswd=d),type:"password",placeholder:e.$t("account.withdrawalPassword.label.password")},{default:r(()=>[s(a(b),{class:"input-prefix",slot:"start",src:a(h)("/account/w-password.png")},null,8,["src"]),s(a(g),{slot:"end",color:"medium"})]),_:1},8,["modelValue","placeholder"])]),i("div",W,[i("div",q,w(e.$t("account.withdrawalPassword.label.repeatPassword")),1),s(a(p),{modelValue:t.withdrawPasswdRepeat,"onUpdate:modelValue":o[1]||(o[1]=d=>t.withdrawPasswdRepeat=d),type:"password",placeholder:e.$t("account.withdrawalPassword.label.repeatPassword")},{default:r(()=>[s(a(b),{class:"input-prefix",slot:"start",src:a(h)("/account/w-password.png")},null,8,["src"]),s(a(g),{slot:"end",color:"medium"})]),_:1},8,["modelValue","placeholder"])]),i("div",A,[i("div",E,w(e.$t("account.withdrawalPassword.label.phone")),1),s(a(p),{modelValue:t.mobile,"onUpdate:modelValue":o[2]||(o[2]=d=>t.mobile=d),placeholder:e.$t("account.withdrawalPassword.label.phone")},{default:r(()=>[i("span",F,w(a(V)),1)]),_:1},8,["modelValue","placeholder"]),G,s(a(p),{modelValue:t.verificationCode,"onUpdate:modelValue":o[3]||(o[3]=d=>t.verificationCode=d),placeholder:e.$t("account.withdrawalPassword.label.otpPlaceholder")},{default:r(()=>[H,s(a(v),{slot:"end",class:"btn-otp",style:{color:"#c5000f"},onClick:C},{default:r(()=>[_(w(u.value),1)]),_:1})]),_:1},8,["modelValue","placeholder"])])]),_:1}),s(a(x),null,{default:r(()=>[s(a(v),{class:"btn-confirm",expand:"block",shape:"round",onClick:k},{default:r(()=>[_(w(e.$t("account.button.confirm")),1)]),_:1})]),_:1})]),_:1}))}};export{ft as default};
