import{r as f,H as k,I as N,J as i,L as a,M as t,C as n,E as e,N as g,O as $,j as M,B as X,a as Y,U as x,W as tt,P as T,S as z,Q as at,F as et,Z as ot}from"./@vue-DSZqUJEn.js";import{u as st}from"./vue-i18n-DQsz-j5M.js";import{b as F}from"./vue-router-DMBiYGXd.js";import{f as y,P as O,t as A,d as nt,e as U,J as E,b as it,B as j,A as C,n as J,O as rt,m as lt,q as dt,o as ut,j as ct,c as wt}from"./@ionic-cajVy0nw.js";import{k as pt,c as ht}from"./ionicons-vS9WG2d3.js";import{d as H,a as mt,c as ft,g as gt,b as _t}from"./index-BOvGkc1M.js";import{g as vt,a as bt,b as At,c as $t}from"./withdraw-DPbb91XL.js";import"./@intlify-BAcCFw_v.js";import"./@ionic_components_1-CG1weR9z.js";import"./@stencil-pJInS8Bp.js";import"./@ionic_components_2-DZGN-9Y0.js";import"./@capacitor-CHoHO2YB.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./pinia-DXl0KkUU.js";import"./jsencrypt-Ve0Y4aUG.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";const kt={class:"wrapper"},yt={class:"dialog-title"},Pt={class:"dialog-content"},Ct={class:"btn-group"},Dt={__name:"SetPasswordPopup",setup(V,{expose:P}){const D=F(),{popupEnter:h,popupLeave:B}=H(),w=f(!1),_=async()=>{w.value=!0},L=()=>{w.value=!1,D.push({name:"WithdrawPassword"})};return P({showDialog:_}),(c,u)=>(k(),N(e(O),{class:"setPassword-popup",isOpen:w.value,enterAnimation:e(h),leaveAnimation:e(B),onDidDismiss:u[1]||(u[1]=v=>w.value=!1)},{default:i(()=>[a("div",kt,[a("h3",yt,t(c.$t("withdraw.setPasswordPopup.title")),1),a("div",Pt,t(c.$t("withdraw.setPasswordPopup.des")),1),a("div",Ct,[n(e(y),{class:"btn-cancel ion-text-capitalize",fill:"solid",shape:"round",onClick:u[0]||(u[0]=g(v=>w.value=!1,["stop"]))},{default:i(()=>[$(t(c.$t("withdraw.button.cancel")),1)]),_:1}),n(e(y),{class:"btn-confirm ion-text-capitalize",fill:"solid",shape:"round",onClick:g(L,["stop"])},{default:i(()=>[$(t(c.$t("withdraw.button.goToSetPassword")),1)]),_:1})])])]),_:1},8,["isOpen","enterAnimation","leaveAnimation"]))}},Lt={class:"wrapper"},It={class:"dialog-title"},St={class:"dialog-content"},Nt={class:"btn-group"},Bt={__name:"BankCardPopup",setup(V,{expose:P}){const D=F(),{popupEnter:h,popupLeave:B}=H(),w=f(!1),_=async()=>{w.value=!0},L=()=>{w.value=!1,D.push({name:"BankCardList"})};return P({showDialog:_}),(c,u)=>(k(),N(e(O),{class:"bankCard-popup",isOpen:w.value,enterAnimation:e(h),leaveAnimation:e(B),onDidDismiss:u[1]||(u[1]=v=>w.value=!1)},{default:i(()=>[a("div",Lt,[a("h3",It,t(c.$t("withdraw.bankCardPopup.title")),1),a("div",St,t(c.$t("withdraw.bankCardPopup.des")),1),a("div",Nt,[n(e(y),{class:"btn-cancel ion-text-capitalize",fill:"solid",shape:"round",onClick:u[0]||(u[0]=g(v=>w.value=!1,["stop"]))},{default:i(()=>[$(t(c.$t("withdraw.button.cancel")),1)]),_:1}),n(e(y),{class:"btn-confirm ion-text-capitalize",fill:"solid",shape:"round",onClick:g(L,["stop"])},{default:i(()=>[$(t(c.$t("withdraw.button.addNewAccount")),1)]),_:1})])])]),_:1},8,["isOpen","enterAnimation","leaveAnimation"]))}},Wt={class:"balance-card"},zt={class:"balance-content"},Ft={class:"balance-title"},Ot={class:"balance-amount"},Vt={style:{margin:"4px 0"}},Mt={class:"block-title ion-justify-content-between",style:{display:"flex"}},Tt={style:{color:"#fdea5a"}},Ut={style:{margin:"4px 0"}},Et={class:"block-title"},jt={key:0},Jt=a("hr",null,null,-1),Ht={slot:"start",style:{color:"#FD5959","font-size":"0.8rem"}},Rt={slot:"end"},qt={slot:"start",style:{color:"#FD5959","font-size":"0.8rem"}},Qt={slot:"end"},Zt={slot:"start",style:{color:"#FD5959","font-size":"0.8rem"}},Gt={slot:"end"},Kt={slot:"start",style:{color:"#FD5959","font-size":"0.8rem"}},Xt={slot:"end"},Yt=a("hr",null,null,-1),xt={style:{margin:"4px 0"}},ta={class:"block-title"},aa={style:{"font-size":"0.8rem"}},ea={style:{color:"#ffdf3f","margin-left":"4px"}},oa={style:{color:"#ffdf3f","margin-left":"4px"}},sa={class:"account-number"},na={class:"account-text"},ia=a("br",null,null,-1),ra={slot:"start",style:{color:"#FD5959","font-size":"0.8rem"}},la={slot:"end"},da={slot:"start",style:{color:"#FD5959","font-size":"0.8rem"}},ua={slot:"end"},ca={style:{"font-size":"0.8rem",color:"#fa8484"}},wa={style:{color:"#ffdf3f",margin:"0 4px"}},pa={style:{margin:"4px 0"}},ha={class:"block-title"},ma={slot:"start",style:{color:"#FD5959","font-size":"0.8rem"}},fa={slot:"end"},ga={style:{margin:"4px 0"}},_a={class:"block-title"},Ua={__name:"Withdraw",setup(V){const{t:P}=st(),D=F(),h=mt(),B=ft(),{getImgUrl:w}=_t(),_=f(null),L=f(null),c=f(!1),u=f(!1),v=f(1),m="â‚¹",I=f(0),W=f(0),S=f([]),r=M({withdrawAmount:0,remainingWithdrawLimit:"",remainingWithdrawCount:"",withdrawLimit:"",vipDailyLimit:"",balance:"",bankInfo:{},withdrawAccounts:[]}),l=M({withdrawAmount:0,withdrawFee:0,arrivalAmount:0,bankAccount:"",serviceCharge:0,withdrawPassword:""});X(async()=>{var b;h.barLoading=!0;const o=await gt({userId:B.userInfo.id});o.state==="200"?r.withdrawAccounts=((b=o.resultData.withdrawAccounts)==null?void 0:b.map(s=>(s.withdrawAccount=JSON.parse(s.withdrawAccount),s)))||[]:await(await A.create({message:o.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present();const d=await vt();d.state==="200"?(u.value=d.resultData,u.value||_.value.showDialog()):await(await A.create({message:d.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present();const p=await bt();p.state==="200"?(console.log(p.resultData),v.value=p.resultData.configType,r.remainingWithdrawLimit=p.resultData.remainingWithdrawLimit,r.withdrawLimit=p.resultData.withdrawLimit,r.remainingWithdrawCount=p.resultData.remainingWithdrawCount,r.vipDailyLimit=p.resultData.vipDailyLimit,r.balance=p.resultData.balance,p.resultData.amountParam&&(S.value=p.resultData.amountParam.split(",").map(s=>Number(s)),I.value=S.value[0],W.value=S.value[S.value.length-1],r.withdrawAmount=I.value)):await(await A.create({message:p.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),h.barLoading=!1});const R=o=>{r.withdrawAmount=Number(o)},q=()=>{u.value?D.push({name:"BankCardList"}):_.value.showDialog()},Q=()=>{u.value?D.push({name:"BankCardList"}):_.value.showDialog()},Z=async()=>{if(!u.value){_.value.showDialog();return}if(r.withdrawAccounts.length==0){L.value.showDialog();return}if(v.value==1&&Number(r.withdrawAmount)<=0){await(await A.create({message:P("withdraw.toast.text3"),duration:1500,position:"top",color:"danger",translucent:!0})).present();return}if(Number(r.withdrawAmount)<I.value||Number(r.withdrawAmount)>W.value){await(await A.create({message:"Min: ".concat(I.value," Max: ").concat(W.value),duration:1500,position:"top",color:"danger",translucent:!0})).present();return}h.fullLoading=!0;const o=await At({withdrawAmount:r.withdrawAmount});o.state==="200"?(l.arrivalAmount=o.arrivalAmount,l.bankAccount=o.bankAccount||r.bankInfo.withdrawAccount.accountNumber,l.serviceCharge=o.serviceCharge,l.withdrawAmount=o.withdrawAmount,l.withdrawFee=o.withdrawFee,l.withdrawPassword="",c.value=!0):await(await A.create({message:o.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),h.fullLoading=!1},G=async()=>{if(l.withdrawPassword.length==0){await(await A.create({message:P("withdraw.toast.text1"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}h.fullLoading=!0;const o=await $t({withdrawAmount:l.withdrawAmount,withdrawPasswd:l.withdrawPassword,withdrawTypeId:r.bankInfo.withdrawTypeId});o.state==="200"?(await(await A.create({message:P("withdraw.toast.text2"),duration:1500,position:"top",color:"success",translucent:!0})).present(),c.value=!1):await(await A.create({message:o.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),h.fullLoading=!1};return(o,d)=>{const p=tt("ion-header");return Y((k(),N(e(ct),{class:"withdraw"},{default:i(()=>[n(e(J),null,{default:i(()=>{var b;return[a("div",Wt,[n(e(nt),{src:e(w)("/wallet/img-bg-balance.png")},null,8,["src"]),a("div",zt,[a("div",Ft,t(o.$t("withdraw.myBalance")),1),a("div",Ot,t(e(m))+" "+t((b=r.balance)==null?void 0:b.toLocaleString()),1)])]),a("div",Vt,[a("div",Mt,[a("span",null,t(o.$t("withdraw.bankAccount")),1),a("span",{class:"btn-change-account",onClick:g(Q,["stop"])},t(o.$t("withdraw.changeBankAccount")),1)]),n(e(y),{color:"danger",expand:"block",onClick:g(q,["stop"])},{default:i(()=>[n(e(U),{slot:"start",icon:e(pt),style:{color:"#fdea5a"}},null,8,["icon"]),a("span",Tt,t(o.$t("withdraw.addNewAccount")),1)]),_:1})]),a("div",Ut,[a("div",Et,[$(t(o.$t("withdraw.withdrawAmount"))+" ",1),v.value==1?(k(),T("span",jt,"("+t(e(m))+" "+t(I.value)+" - "+t(W.value)+" )",1)):z("",!0)]),v.value==1?(k(),N(e(E),{key:0,modelValue:r.withdrawAmount,"onUpdate:modelValue":d[0]||(d[0]=s=>r.withdrawAmount=s),label:e(m),type:"number",placeholder:o.$t("withdraw.withdrawAmount"),max:W.value,min:I.value,clearInput:!0},null,8,["modelValue","label","placeholder","max","min"])):z("",!0),v.value==2?(k(),N(e(it),{key:1,style:{margin:"8px 0"}},{default:i(()=>[(k(!0),T(et,null,at(S.value,(s,K)=>(k(),N(e(wt),{key:K,size:"3.8",class:ot(["amount-item",{select:Number(s)==Number(r.withdrawAmount)}]),onClick:g(va=>R(s),["stop"])},{default:i(()=>[a("div",null,t(e(m))+" "+t(s==null?void 0:s.toLocaleString()),1)]),_:2},1032,["class","onClick"]))),128))]),_:1})):z("",!0)]),Jt,n(e(j),null,{default:i(()=>[n(e(C),{class:"limit-item",lines:"none"},{default:i(()=>{var s;return[a("span",Ht,t(o.$t("withdraw.items1"))+":",1),a("span",Rt,t(e(m))+" "+t((s=r.remainingWithdrawLimit)==null?void 0:s.toLocaleString()),1)]}),_:1}),n(e(C),{class:"limit-item",lines:"none"},{default:i(()=>{var s;return[a("span",qt,t(o.$t("withdraw.items2"))+":",1),a("span",Qt,t(e(m))+" "+t((s=r.vipDailyLimit)==null?void 0:s.toLocaleString()),1)]}),_:1}),n(e(C),{class:"limit-item",lines:"none"},{default:i(()=>{var s;return[a("span",Zt,t(o.$t("withdraw.items3"))+":",1),a("span",Gt,t(e(m))+" "+t((s=r.withdrawLimit)==null?void 0:s.toLocaleString()),1)]}),_:1}),n(e(C),{class:"limit-item",lines:"none"},{default:i(()=>{var s;return[a("span",Kt,t(o.$t("withdraw.items4"))+":",1),a("span",Xt,t((s=r.remainingWithdrawCount)==null?void 0:s.toLocaleString()),1)]}),_:1})]),_:1}),Yt,a("div",xt,[a("div",ta,t(o.$t("withdraw.tips.title"))+": ",1),a("span",aa,[a("span",null,t(o.$t("withdraw.tips.tips1")),1),a("span",ea,t(o.$t("withdraw.tips.tips2")),1),a("span",null,t(o.$t("withdraw.tips.tips3")),1),a("span",oa,t(o.$t("withdraw.tips.tips4")),1),$(". ")])])]}),_:1}),n(e(rt),null,{default:i(()=>[n(e(y),{class:"btn-withdraw",expand:"block",shape:"round",onClick:g(Z,["stop"])},{default:i(()=>[$(t(o.$t("withdraw.button.withdraw")),1)]),_:1})]),_:1}),n(Dt,{ref_key:"setPasswordPopup",ref:_},null,512),n(Bt,{ref_key:"bankCardPopup",ref:L},null,512),n(e(O),{class:"withdraw-info","is-open":c.value,"initial-breakpoint":1,breakpoints:[0,1]},{default:i(()=>[n(p,null,{default:i(()=>[n(e(lt),null,{default:i(()=>[n(e(dt),null,{default:i(()=>[$(t(o.$t("withdraw.configPopup.title")),1)]),_:1}),n(e(ut),{style:{position:"absolute",top:"0",right:"16px"}},{default:i(()=>[n(e(y),{onClick:d[1]||(d[1]=g(b=>c.value=!1,["stop"]))},{default:i(()=>[n(e(U),{slot:"icon-only",icon:e(ht),color:"light"},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),n(e(J),{class:"ion-padding"},{default:i(()=>{var b;return[a("div",sa,t(e(m))+" "+t((b=l.arrivalAmount)==null?void 0:b.toLocaleString()),1),a("div",na,t(o.$t("withdraw.configPopup.arrivalAmount")),1),ia,n(e(j),null,{default:i(()=>[n(e(C),{class:"detail-item",lines:"none"},{default:i(()=>{var s;return[a("span",ra,t(o.$t("withdraw.configPopup.title"))+":",1),a("span",la,t(e(m))+" "+t((s=l.withdrawAmount)==null?void 0:s.toLocaleString()),1)]}),_:1}),n(e(C),{class:"detail-item",lines:"none"},{default:i(()=>{var s;return[a("span",da,t(o.$t("withdraw.configPopup.serviceCharge"))+":",1),a("span",ua,t(e(m))+" "+t((s=l.serviceCharge)==null?void 0:s.toLocaleString()),1)]}),_:1}),a("div",ca,[a("span",null,t(o.$t("withdraw.configPopup.des1")),1),a("span",wa,t(l.withdrawFee)+"%",1),a("span",null,t(o.$t("withdraw.configPopup.des2")),1)]),a("div",pa,[a("div",ha,t(o.$t("withdraw.configPopup.chooseBankAccount")),1),n(e(C),{class:"detail-item",lines:"none"},{default:i(()=>[a("span",ma,t(o.$t("withdraw.configPopup.yourBankAccount"))+":",1),a("span",fa,t(l.bankAccount),1)]),_:1})])]),_:1}),a("div",ga,[a("div",_a,t(o.$t("withdraw.configPopup.withdrawPassword")),1),n(e(E),{modelValue:l.withdrawPassword,"onUpdate:modelValue":d[2]||(d[2]=s=>l.withdrawPassword=s),placeholder:o.$t("withdraw.configPopup.placeHolder")},null,8,["modelValue","placeholder"])]),n(e(y),{class:"btn-withdraw",expand:"block",shape:"round",onClick:g(G,["stop"])},{default:i(()=>[$(t(o.$t("withdraw.button.withdraw")),1)]),_:1})]}),_:1})]),_:1},8,["is-open"])]),_:1},512)),[[x,S.value.length>0]])}}};export{Ua as default};
